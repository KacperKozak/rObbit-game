{"version":3,"sources":["data/images/cannonRecoil.png","data/images/walk.png","data/images/button.png","data/images/box.png","data/images/stairs.png","data/images/wall.png","data/images/cliff.png","data/images/dustRiver.png","data/images/dustPipe.png","data/images/columns.png","data/images/greenRiver.png","data/images/crossbow.png","data/images/mountains.png","data/images/lake.png","app/intro/intro.mp4","app/intro/outro.mp4","app/assets/logo.png","types/types.ts","config.ts","types/consts.ts","helpers.ts","objects/models/Items.tsx","objects/tileTypeDefinitions.tsx","audio/play.ts","objects/propTypeDefinitions.tsx","objects/definitions.ts","state/resolvers/flyResolver.ts","state/resolvers/grappleResolver.ts","state/resolvers/moveResolver.ts","state/gameReducer.ts","state/resolvers/rotateResolver.ts","state/resolvers/equipResolver.ts","state/localReducer.ts","state/gameEpics.ts","state/soundEpics.ts","state/store.ts","hooks/useGame.ts","app/Environment.tsx","app/GameInstance.tsx","components/Button.tsx","components/Dialog.tsx","data/maps.ts","hooks/useEditor.ts","hooks/useKeyboardEvent.ts","app/Authors.tsx","app/DebugView.tsx","app/intro/Video.tsx","app/Menu.tsx","hooks/useLocal.ts","app/App.tsx","index.tsx"],"names":["module","exports","ObjectTypes","CAMERA_OFFSET","AUTHORS","name","tech","UP","RIGHT","DOWN","LEFT","applyVector","x","y","findById","props","id","find","prop","findByXY","objects","xy","filter","tile","x1","y1","x2","y2","samePosition","asArray","item","Array","isArray","arrMerge","a","b","limitVector","vector","min","max","map","v","value","Math","limit","vectorDiff","v1","v2","i","createArray","length","from","useMyLoader","rocket","useLoader","GLTFLoader","process","cannon","box","rock","rock2","fence","arrow","crossbow","graund","wall","grass","water","ice","button","door","wallMetal","pipe","pipeLeft","pipeRight","pipePlace","pipeElement","pipeUp","pipeDown","tree","tree2","metal","metal2","end","scene","useAnimationLoader","boring","boom","AssetPreload","model","instance","elevation","rotation","data","castShadow","receiveShadow","elevationFix","clonedModel","useMemo","m","clone","scale","set","children","el","open","position","setY","active","setX","anim","useSpring","pos","rot","vectorToThree","primitive","object","AnimateSelfAsset","animateModel","gltfScene","mixer","AnimationMixer","animations","forEach","clip","index","animation","clipAction","setLoop","LoopOnce","play","useFrame","update","group","PI","tileTypeDefinitions","Grass","height","Component3d","Water","enter","who","self","lose","Ice","move","targetId","RockFloor","Wall","soundList","Alert_NO","Alert_YES","Bazooka","Crossbow","Engine_start","Engine_LOOP_128","Engine_NO_1","Engine_NO_2","Engine_stop","Equip_1","Equip_2","Equip_3","Equip_4","Hero_1","Hero_2","Jump","Explosion_1","Explosion_2","Music","Drone","getAudio","volume","audio","Audio","playEquip","round","random","explosionIndex","engineStart","propTypeDefinitions","Player","models","robotModel","robot","animMixer","visible","hasCannon","hasGrapple","BigRock","BigRock2","Pipe","PipeLeft","PipeRight","PipeUp","PipeDown","PipeElement","push","PipePlace","type","win","Tree","Tree2","Metal","Metal2","Box","Fence","force","removeObject","Button","state","console","warn","toggle","setObjectData","WinTrigger","Door","WallMetal","Cannon","equip","Boom","RocketProjectile","projectileLaunch","delay","projectileHit","what","list","playExplosion","tmpSpawn","uniqueId","aIndex","zIndex","CrossbowProjectile","objectDefinitions","getDefinition","def","Error","isTooHight","ontoObj","flyer","objDef","maxElevation","obj","initialState","queueStared","queue","mapId","mapName","cleanObjectsState","winDialog","gameAction","actionCreatorFactory","queueAction","loadMap","unloadMap","reset","showWinDialog","enqueue","tryNextAction","nextAction","queueEnd","rotate","fall","projectile","fly","flyEnd","grapple","updateObject","addObject","replaceObjects","updateCleanObjectsState","gameReducer","reducerWithInitialState","case","action","actions","addActions","target","newXY","newXYObjects","sort","objectValues","event","newElevation","moveResolver","rotateResolver","myObjects","equipResolver","byId","launchActions","abortResults","hitTargetId","flyResolver","undefined","hitActions","projectileInstance","addGrappleAnimation","prevXY","grappleResolver","addCompletedMap","localReducer","completedMaps","uniq","gameEpics","combineEpics","actions$","state$","match","game","mapTo","first","flatMap","newActionDelay","payload","meta","concat","of","soundEpics","tap","setTimeout","pause","ignoreElements","epicMiddleware","createEpicMiddleware","composeEnhancers","composeWithDevTools","rootReducer","combineReducers","local","persistReducer","key","storage","store","createStore","applyMiddleware","persistor","persistStore","run","useGame","useSelector","dispatch","useDispatch","player","rdy","isEqual","fire","Environment","objectsList","useThree","camera","size","useEffect","xValues","yValues","mapCenterX","mapCenterY","offsetX","width","offsetY","offsetZ","lookAt","intensity","color","Color","shadow-mapSize-Height","shadow-mapSize-width","shadow-camera-far","shadow-bias","shadow-camera-left","shadow-camera-right","shadow-camera-top","shadow-camera-bottom","GameInstance","zoom","onCreated","gl","shadowMap","PCFSoftShadowMap","enabled","fallback","Loading","styled","div","ButtonBlock","Dialog","Container","DialogBG","maps","image","walkImg","walk","buttonImg","boxImg","stairsImg","stairs","cliffImg","cliff","wallImg","cannonImg","cannonRecoilImg","cannonRecoil","dustRiverImg","dustRiver","columnsImg","columns","dustPipeImg","dustPipe","greenRiverImg","greenRiver","crossbowImg","mountainsImg","mountains","iceworld","lakeImg","lake","useEditor","useState","editMode","setEditMode","lastType","setLastType","lastElevation","setLastElevation","updateCleanState","add","sample","remove","moveMap","toggleEditMode","copyMap","serializedMap","JSON","stringify","navigator","clipboard","writeText","then","log","error","useKeyboardEvent","callback","deps","memoisedCallback","useCallback","hotkeys","unbind","Authors","Info","AuthorList","array","arr","slice","j","floor","shuffleArray","href","p","ul","DebugView","editor","onClick","MapGrid","Row","Cols","Cell","setOpen","addEmpty","getHeight","CellContainer","CellObj","Remove","field","onChange","CellInfoContainer","style","isEmpty","TextInput","NumberInput","step","parseFloat","Number","isNaN","TypeSelect","Object","keys","ElevationInput","f","RotationInput","label","RotationInputButton","RotationBtn","span","MoveInput","DataInput","localData","setLocalData","onFocus","parse","e","videos","intro","outro","Video","onEnded","video","HTMLVideo","autoPlay","src","SkipButton","Menu","isCompleted","includes","allCompeted","every","useLocal","introPlayed","setIntroPlayed","gameStarted","setGameStarted","outroPlayed","setOutroPlayed","playingOutro","setPlayingOutro","musicRef","useRef","droneRef","playMusic","current","currentTime","onEnd","addEventListener","removeEventListener","nextMap","currentIndex","findIndex","left","up","down","right","Title","logo","alt","LevelWrapper","LevelButton","Completed","StartButtonWrapper","StartButton","SmallMenuWrapper","MapName","ControlsWrapper","h1","App","loading","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8672b7ac.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cannonRecoil.a2086f36.png\";","module.exports = __webpack_public_path__ + \"static/media/walk.2c6b65d9.png\";","module.exports = __webpack_public_path__ + \"static/media/button.919eb220.png\";","module.exports = __webpack_public_path__ + \"static/media/box.1528d2f0.png\";","module.exports = __webpack_public_path__ + \"static/media/stairs.830ce4c0.png\";","module.exports = __webpack_public_path__ + \"static/media/wall.7dcb4ad7.png\";","module.exports = __webpack_public_path__ + \"static/media/cliff.10841942.png\";","module.exports = __webpack_public_path__ + \"static/media/dustRiver.b3b38ac2.png\";","module.exports = __webpack_public_path__ + \"static/media/dustPipe.fd44e7e7.png\";","module.exports = __webpack_public_path__ + \"static/media/columns.2e670f0f.png\";","module.exports = __webpack_public_path__ + \"static/media/greenRiver.3dd4b766.png\";","module.exports = __webpack_public_path__ + \"static/media/crossbow.03ac550d.png\";","module.exports = __webpack_public_path__ + \"static/media/mountains.ac4521ba.png\";","module.exports = __webpack_public_path__ + \"static/media/lake.479979eb.png\";","module.exports = __webpack_public_path__ + \"static/media/intro.cc1ac876.mp4\";","module.exports = __webpack_public_path__ + \"static/media/outro.9557d880.mp4\";","module.exports = \"data:image/png;base64,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\"","import { GameState } from '../state/gameReducer'\nimport { Action } from 'redux'\nimport { FC, ReactNode } from 'react'\n\nexport type XY = [number, number]\nexport type Vector2 = [number, number]\n\nexport enum ObjectTypes {\n    Player = 'Player',\n    WinTrigger = 'WinTrigger',\n\n    Grass = 'Grass',\n    Water = 'Water',\n    RockFloor = 'RockFloor',\n    Wall = 'Wall',\n    Box = 'Box',\n    BigRock = 'BigRock',\n    BigRock2 = 'BigRock2',\n\n    Pipe = 'Pipe',\n    PipeLeft = 'PipeLeft',\n    PipeRight = 'PipeRight',\n    PipePlace = 'PipePlace',\n    PipeUp = 'PipeUp',\n    PipeDown = 'PipeDown',\n    PipeElement = 'PipeElement',\n\n    Tree = 'Tree',\n    Tree2 = 'Tree2',\n    Metal = 'Metal',\n    Metal2 = 'Metal2',\n\n    Fence = 'Fence',\n\n    Button = 'Button',\n    Door = 'Door',\n    WallMetal = 'WallMetal',\n    Ice = 'Ice',\n\n    Crossbow = 'Crossbow',\n    Cannon = 'Cannon',\n    Boom = 'Boom',\n\n    CrossbowProjectile = 'CrossbowProjectile',\n    RocketProjectile = 'RocketProjectile',\n}\n\nexport interface ObjectInstance {\n    type: ObjectTypes\n    id: string\n    xy: XY\n    rotation: Vector2\n    elevation: number\n    zIndex: number\n    aIndex: number\n    data: Partial<ObjectInstanceData>\n}\n\nexport interface ObjectInstanceData {\n    hasCannon: boolean\n    hasGrapple: boolean\n    info: string\n    open: boolean\n    active: boolean\n    targetId: string\n}\n\nexport interface ActionEvent {\n    who: ObjectInstance\n    self: ObjectInstance\n    what?: ObjectInstance\n    vector: Vector2\n    state: GameState\n    force?: number\n}\n\nexport interface ObjectDefinition {\n    name: string\n    height: (instance: ObjectInstance) => number\n    push?(event: ActionEvent): Action[] // triggered when elevation is to big\n    enter?(event: ActionEvent): Action[]\n    leave?(event: ActionEvent): Action[]\n    equip?(event: ActionEvent): Action[]\n    projectileLaunch?(event: ActionEvent): Action[] // eg. for projectile\n    projectileHit?(event: ActionEvent): Action[] // eg. for projectile\n    Component3d(props: RenderComponentProps): any\n}\n\nexport interface RenderComponentProps {\n    instance: ObjectInstance\n}\n\nexport interface MapData {\n    id: string\n    name: string\n    objects: ObjectInstance[]\n    image?: string\n}\n","export const IS_DEV = process.env.NODE_ENV !== 'production'\n\nexport const CAMERA_OFFSET = [-2, 4, 6]\n\nexport const MAX_MOVE_ELEVATION = 0.5\n\nexport const PROJECTILE_ELEVATION = 0.8\n\nexport const GRAPPLE_RANGE = 5\nexport const GRAPPLE_ELEVATION = 0.5\nexport const GRAPPLE_MOVE_DELAY = 300\n\nexport const DEFAULT_ACTION_DELAY = 65\n\nexport const FALL_TRIGGER_DELAY = 400\nexport const FALL_REMOVE_DELAY = 800\nexport const FALL_ELEVATION = -5\n\nexport const GAME_NAME = 'rObbit'\n\nexport const BTN_PLAY = 'Play'\n\nexport const BTN_SKIP = 'Skip'\nexport const BTN_LEVEL = 'Level'\nexport const BTN_EXIT = 'Exit'\nexport const BTN_RESTART = 'Restart'\n\nexport const BTN_EQUIP = 'Equip'\nexport const BTN_GRAPPLE = 'Grapple'\nexport const BTN_FIRE = 'Fire'\n\nexport const CONGRATULATIONS = 'Congratulations!'\nexport const LEVEL_COMPLETE = 'Level complete'\nexport const NEXT_LEVEL = 'Next level'\n\nexport const LOADING = 'Loading'\n\nexport const AUTHORS = [\n    { name: 'Kacper Kozak', tech: '(silnik gry)' },\n    { name: 'Bartosz Kozak', tech: '(renderer gry, level design, grafika 3D)' },\n    { name: 'Maciek Wierzejski | Redhatto', tech: '(grafika, 3D, filmy i artwork)' },\n    { name: 'Leszek Karczewski | DamnDog', tech: '(muzyka i dwik)' },\n]\n","import { Vector2 } from './types'\n\nexport const PLAYER_ID = 'player'\n\nexport const UP: Vector2 = [0, -1]\nexport const RIGHT: Vector2 = [1, 0]\nexport const DOWN: Vector2 = [0, 1]\nexport const LEFT: Vector2 = [-1, 0]\n","import { XY, Vector2 } from './types/types'\nimport { sample } from 'lodash'\nimport { UP, LEFT, RIGHT, DOWN } from './types/consts'\n\nexport const reverseVector = (vector: Vector2) => vector.map(v => v * -1) as Vector2\n\nexport const applyVector = ([x, y]: XY, [vx, vy]: Vector2): XY => [x + vx, y + vy]\n\nexport const samePosition = ([x1, y1]: XY, [x2, y2]: XY) => x1 === x2 && y1 === y2\n\nexport const findById = <T extends { id: string }>(props: T[], id: string) => {\n    return props.find(prop => prop.id === id)\n}\n\nexport const findByXY = <T extends { xy: XY }>(objects: T[], xy: XY) => {\n    return objects.filter(tile => samePosition(tile.xy, xy))\n}\n\nexport const asArray = <T>(item: T | T[]): T[] => (Array.isArray(item) ? item : [item])\nexport const arrMerge = <T>(a: T[], b: T | T[] = []): T[] => [...a, ...asArray(b)]\n\nexport const limit = (value: number, min: number, max: number) =>\n    Math.min(max, Math.max(min, value))\n\nexport const limitVector = (vector: Vector2, min: number, max: number) =>\n    vector.map(v => limit(v, min, max)) as Vector2\n\nexport const vectorDiff = (v1: Vector2, v2: Vector2) => v1.map((v, i) => v2[i] - v) as Vector2\n\nexport const createArray = (length: number): number[] =>\n    Array.from({ length: length + 1 }, (v, i) => i)\n\nexport const randomRotation = () => {\n    return sample([UP, LEFT, RIGHT, DOWN])!\n}\n\nexport const shuffleArray = <T>(array: T[]): T[] => {\n    const arr = array.slice()\n    for (let i = arr.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1))\n        ;[arr[i], arr[j]] = [arr[j], arr[i]]\n    }\n    return arr\n}\n","import React, { useMemo, useRef } from 'react'\nimport { animated, useSpring } from 'react-spring/three'\nimport { useFrame, useLoader } from 'react-three-fiber'\nimport { AnimationMixer, LoopOnce } from 'three'\nimport { GLTF, GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { RenderComponentProps, Vector2 } from '../../types/types'\n\nconst useMyLoader = () => {\n    // const robot = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/robot_model.gltf`)\n    const rocket = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/rocket.gltf`)\n    const cannon = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/cannon.gltf`)\n    const box = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/box.gltf`)\n    const rock = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/rock1.gltf`)\n    const rock2 = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/rock2.gltf`)\n    const fence = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/fence.gltf`)\n    const arrow = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/arrow.gltf`)\n    const crossbow = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/crossbow.gltf`)\n    const graund = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/graund.gltf`)\n    const wall = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/wall.gltf`)\n    const grass = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/grass.gltf`)\n    const water = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/water.gltf`)\n    const ice = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/ice.gltf`)\n    const button = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/button.gltf`)\n    const door = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/door.gltf`)\n    const wallMetal = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/wall-metal.gltf`)\n    const pipe = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/pipe.gltf`)\n    const pipeLeft = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/pipe-left.gltf`)\n    const pipeRight = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/pipe-right.gltf`)\n    const pipePlace = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/pipe-place.gltf`)\n    const pipeElement = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/pipe-element.gltf`)\n    const pipeUp = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/pipe-down.gltf`)\n    const pipeDown = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/pipe-down.gltf`)\n    const tree = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/tree.gltf`)\n    const tree2 = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/tree2.gltf`)\n    const metal = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/metal1.gltf`)\n    const metal2 = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/metal2.gltf`)\n    const end = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/end.gltf`)\n    return {\n        // robot: robot.scene,\n        rocket: rocket.scene,\n        cannon: cannon.scene,\n        box: box.scene,\n        rock: rock.scene,\n        rock2: rock2.scene,\n        fence: fence.scene,\n        arrow: arrow.scene,\n        crossbow: crossbow.scene,\n        graund: graund.scene,\n        wall: wall.scene,\n        grass: grass.scene,\n        water: water.scene,\n        ice: ice.scene,\n        button: button.scene,\n        door: door.scene,\n        wallMetal: wallMetal.scene,\n        pipe: pipe.scene,\n        pipeLeft: pipeLeft.scene,\n        pipeRight: pipeRight.scene,\n        pipePlace: pipePlace.scene,\n        pipeElement: pipeElement.scene,\n        pipeUp: pipeUp.scene,\n        pipeDown: pipeDown.scene,\n        tree: tree.scene,\n        tree2: tree2.scene,\n        metal: metal.scene,\n        metal2: metal2.scene,\n        end: end.scene,\n    }\n}\nconst useAnimationLoader = () => {\n    // const jump = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/animations/jump.gltf`)\n    const boring = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/animations/boring.gltf`)\n    const boom = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/boom.gltf`)\n\n    return {\n        // jump,\n        boring,\n        boom,\n    }\n}\n\nexport const Box = (props: RenderComponentProps) => {\n    const { box } = useMyLoader()\n    return <AssetPreload {...props} model={box} />\n}\nexport const Rock = (props: RenderComponentProps) => {\n    const { rock } = useMyLoader()\n    return <AssetPreload {...props} model={rock} />\n}\nexport const Rock2 = (props: RenderComponentProps) => {\n    const { rock2 } = useMyLoader()\n    return <AssetPreload {...props} model={rock2} />\n}\nexport const Fence = (props: RenderComponentProps) => {\n    const { fence } = useMyLoader()\n    return <AssetPreload {...props} model={fence} />\n}\nexport const Arrow = (props: RenderComponentProps) => {\n    const { arrow } = useMyLoader()\n    return <AssetPreload {...props} model={arrow} />\n}\nexport const Boom = (props: RenderComponentProps) => {\n    const { boom } = useAnimationLoader()\n    return <AnimateSelfAsset {...props} animateModel={boom} />\n}\nexport const Cannon = (props: RenderComponentProps) => {\n    const { cannon } = useMyLoader()\n    return <AssetPreload {...props} model={cannon} elevationFix={-0.8} />\n}\nexport const Rocket = (props: RenderComponentProps) => {\n    const { rocket } = useMyLoader()\n    return <AssetPreload {...props} model={rocket} />\n}\nexport const Crossbow = (props: RenderComponentProps) => {\n    const { crossbow } = useMyLoader()\n    return <AssetPreload {...props} model={crossbow} elevationFix={-0.8} />\n}\nexport const Ground = (props: RenderComponentProps) => {\n    const { graund } = useMyLoader()\n    return <AssetPreload {...props} model={graund} castShadow={true} receiveShadow={true} />\n}\nexport const Wall = (props: RenderComponentProps) => {\n    const { wall } = useMyLoader()\n    return <AssetPreload {...props} model={wall} castShadow={true} receiveShadow={true} />\n}\nexport const Grass = (props: RenderComponentProps) => {\n    const { grass } = useMyLoader()\n    return <AssetPreload {...props} model={grass} castShadow={false} receiveShadow={true} />\n}\nexport const Water = (props: RenderComponentProps) => {\n    const { water } = useMyLoader()\n    return <AssetPreload {...props} model={water} castShadow={false} receiveShadow={true} />\n}\nexport const Ice = (props: RenderComponentProps) => {\n    const { ice } = useMyLoader()\n    return <AssetPreload {...props} model={ice} castShadow={false} receiveShadow={true} />\n}\nexport const Button = (props: RenderComponentProps) => {\n    const { button } = useMyLoader()\n    return <AssetPreload {...props} model={button} castShadow={true} receiveShadow={true} />\n}\nexport const Door = (props: RenderComponentProps) => {\n    const { door } = useMyLoader()\n    return <AssetPreload {...props} model={door} castShadow={true} receiveShadow={true} />\n}\nexport const WallMetal = (props: RenderComponentProps) => {\n    const { wallMetal } = useMyLoader()\n    return <AssetPreload {...props} model={wallMetal} castShadow={true} receiveShadow={true} />\n}\nexport const Pipe = (props: RenderComponentProps) => {\n    const { pipe } = useMyLoader()\n    return <AssetPreload {...props} model={pipe} castShadow={true} receiveShadow={true} />\n}\nexport const PipeLeft = (props: RenderComponentProps) => {\n    const { pipeLeft } = useMyLoader()\n    return <AssetPreload {...props} model={pipeLeft} castShadow={true} receiveShadow={true} />\n}\nexport const PipeRight = (props: RenderComponentProps) => {\n    const { pipeRight } = useMyLoader()\n    return <AssetPreload {...props} model={pipeRight} castShadow={true} receiveShadow={true} />\n}\nexport const PipeDown = (props: RenderComponentProps) => {\n    const { pipeDown } = useMyLoader()\n    return <AssetPreload {...props} model={pipeDown} castShadow={true} receiveShadow={true} />\n}\nexport const PipeUp = (props: RenderComponentProps) => {\n    const { pipeUp } = useMyLoader()\n    return <AssetPreload {...props} model={pipeUp} castShadow={true} receiveShadow={true} />\n}\nexport const PipePlace = (props: RenderComponentProps) => {\n    const { pipePlace } = useMyLoader()\n    return <AssetPreload {...props} model={pipePlace} castShadow={true} receiveShadow={true} />\n}\nexport const PipeElement = (props: RenderComponentProps) => {\n    const { pipeElement } = useMyLoader()\n    return <AssetPreload {...props} model={pipeElement} castShadow={true} receiveShadow={true} />\n}\nexport const Tree = (props: RenderComponentProps) => {\n    const { tree } = useMyLoader()\n    return <AssetPreload {...props} model={tree} castShadow={true} receiveShadow={true} />\n}\nexport const Tree2 = (props: RenderComponentProps) => {\n    const { tree2 } = useMyLoader()\n    return <AssetPreload {...props} model={tree2} castShadow={true} receiveShadow={true} />\n}\nexport const Metal = (props: RenderComponentProps) => {\n    const { metal } = useMyLoader()\n    return <AssetPreload {...props} model={metal} castShadow={true} receiveShadow={true} />\n}\nexport const Metal2 = (props: RenderComponentProps) => {\n    const { metal2 } = useMyLoader()\n    return <AssetPreload {...props} model={metal2} castShadow={true} receiveShadow={true} />\n}\nexport const Trigger = (props: RenderComponentProps) => {\n    const { end } = useMyLoader()\n    return <AssetPreload {...props} model={end} castShadow={true} receiveShadow={true} />\n}\n\ninterface AssetsProps extends RenderComponentProps {\n    color?: string\n    castShadow?: boolean\n    receiveShadow?: boolean\n    elevationFix?: number\n}\n\ninterface PreloadAssetProps extends AssetsProps {\n    model: GLTF['scene']\n}\ninterface PreloadAssetAnimateProps extends AssetsProps {\n    animateModel: GLTF\n}\n\nconst AssetPreload = ({\n    model,\n    instance: { xy, elevation, rotation, data },\n    castShadow = true,\n    receiveShadow = true,\n    elevationFix = 0,\n}: PreloadAssetProps) => {\n    const clonedModel = useMemo(() => {\n        const m = model.clone()\n        m.scale.set(0.5, 0.5, 0.5)\n        if (castShadow) m.children.map(el => (el.castShadow = true))\n        if (receiveShadow) m.children.map(el => (el.receiveShadow = true))\n        if (m.children.length > 1) {\n            // data.open && m.children[1].position.setZ(1.5)\n            data.open && m.children[1].position.setY(3)\n            data.active && m.children[1].position.setX(-0.2)\n        }\n        return m\n    }, [model, castShadow, receiveShadow, data])\n\n    const anim = useSpring({\n        pos: [xy[0], elevation + elevationFix, xy[1]],\n        rot: [0, vectorToThree(rotation), 0],\n    })\n\n    return <animated.primitive object={clonedModel} position={anim.pos} rotation={anim.rot} />\n}\n\nexport const Player = ({\n    instance: { xy, elevation, rotation, data },\n    castShadow = true,\n    receiveShadow = true,\n}: AssetsProps) => {\n    const anim = useSpring({\n        pos: [xy[0], elevation, xy[1]],\n        rot: [0, vectorToThree(rotation), 0],\n    })\n\n    const models = useMyLoader()\n    const robotModel = useLoader(GLTFLoader, `${process.env.PUBLIC_URL}/assets/robot_model.gltf`)\n\n    const { boring } = useAnimationLoader()\n\n    const { robot, cannon, crossbow, animMixer } = useMemo(() => {\n        const cannon = models.cannon.clone()\n        const crossbow = models.crossbow.clone()\n        const robot = robotModel.scene.clone()\n        const animMixer = new AnimationMixer(boring.scene)\n        robot.scale.set(0.5, 0.5, 0.5)\n        robot.children.map(el => (el.castShadow = true))\n        robot.children.map(el => (el.receiveShadow = true))\n\n        boring.animations.forEach(clip => {\n            animMixer.clipAction(clip, robot).play()\n        })\n\n        return {\n            cannon,\n            crossbow,\n            robot,\n            animMixer,\n        }\n    }, [models.cannon, models.crossbow, castShadow, receiveShadow])\n\n    useFrame(() => {\n        animMixer.update(0.02)\n    })\n\n    return (\n        <animated.group position={anim.pos} rotation={anim.rot}>\n            <primitive object={robot}>\n                <primitive object={cannon} visible={!!data.hasCannon} />\n                <primitive object={crossbow} visible={!!data.hasGrapple} />\n            </primitive>\n        </animated.group>\n    )\n}\n\nconst AnimateSelfAsset = ({\n    animateModel,\n    instance: { xy, elevation, rotation, data },\n    castShadow = true,\n    receiveShadow = true,\n}: PreloadAssetAnimateProps) => {\n    const anim = useSpring({\n        pos: [xy[0], elevation, xy[1]],\n        rot: [0, vectorToThree(rotation), 0],\n    })\n\n    const { gltfScene, mixer } = useMemo(() => {\n        const gltfScene = animateModel.scene.clone()\n        gltfScene.scale.set(0.6, 0.6, 0.6)\n\n        if (castShadow) gltfScene.children[0].castShadow = true\n        if (receiveShadow) gltfScene.children[0].receiveShadow = true\n\n        const mixer = new AnimationMixer(gltfScene)\n        animateModel.animations.forEach((clip, index) => {\n            const animation = mixer.clipAction(clip, gltfScene.children[index])\n            animation.setLoop(LoopOnce, 1)\n            animation.play()\n        })\n\n        return { gltfScene, mixer }\n    }, [castShadow, receiveShadow, animateModel])\n\n    useFrame(() => {\n        mixer.update(0.03)\n    })\n\n    return (\n        <animated.group position={anim.pos} rotation={anim.rot}>\n            <primitive object={gltfScene} />\n        </animated.group>\n    )\n}\n\nconst vectorToThree = (vector: Vector2) => {\n    if (vector[0] === 1 && vector[1] === 0) return Math.PI / 2\n    if (vector[0] === 0 && vector[1] === -1) return (Math.PI / 2) * 2\n    if (vector[0] === -1 && vector[1] === 0) return (Math.PI / 2) * 3\n    if (vector[0] === 0 && vector[1] === 1) return (Math.PI / 2) * 4\n    // return (Math.PI / 2) * 4\n    return 0\n}\n","import { limitVector } from '../helpers'\nimport { lose, move } from '../state/gameReducer'\nimport { PLAYER_ID } from '../types/consts'\nimport { ObjectDefinition, ObjectTypes } from '../types/types'\nimport { Grass, Ground, Ice, Wall, Water } from './models/Items'\n\nexport const tileTypeDefinitions: Partial<Record<ObjectTypes, ObjectDefinition>> = {\n    [ObjectTypes.Grass]: {\n        name: 'Grass',\n        height: () => 0,\n        Component3d: Grass,\n    },\n    [ObjectTypes.Water]: {\n        name: 'Water',\n        height: () => -1,\n        enter: ({ who, self }) => {\n            return who.id === PLAYER_ID ? [lose()] : []\n        },\n        Component3d: Water,\n    },\n\n    [ObjectTypes.Ice]: {\n        name: 'Ice',\n        height: () => 0,\n        enter: ({ who, vector }) => [\n            move({ targetId: who.id, vector: limitVector(vector, -1, 1) }),\n        ],\n        Component3d: Ice,\n    },\n    [ObjectTypes.RockFloor]: {\n        name: 'Rock floor',\n        height: () => 0,\n        Component3d: Ground,\n    },\n    [ObjectTypes.Wall]: {\n        name: 'Wall',\n        height: () => 0,\n        Component3d: Wall,\n    },\n}\n","const soundList = {\n    button: `${process.env.PUBLIC_URL}/sounds/Button_gameplay.mp3`,\n    // music: `${process.env.PUBLIC_URL}/sounds/elementary1.mp3`,\n    Alert_NO: `${process.env.PUBLIC_URL}/sounds/Alert_NO.mp3`,\n    Alert_YES: `${process.env.PUBLIC_URL}/sounds/Alert_YES.mp3`,\n    Bazooka: `${process.env.PUBLIC_URL}/sounds/Bazooka.mp3`,\n    Crossbow: `${process.env.PUBLIC_URL}/sounds/Crossbow.mp3`,\n    Engine_start: `${process.env.PUBLIC_URL}/sounds/Engine_start.mp3`,\n    Engine_LOOP_128: `${process.env.PUBLIC_URL}/sounds/Engine_LOOP_128.mp3`,\n    Engine_NO_1: `${process.env.PUBLIC_URL}/sounds/Engine_NO_1.mp3`,\n    Engine_NO_2: `${process.env.PUBLIC_URL}/sounds/Engine_NO_2.mp3`,\n    Engine_stop: `${process.env.PUBLIC_URL}/sounds/Engine_stop.mp3`,\n    Equip_1: `${process.env.PUBLIC_URL}/sounds/Equip_1.mp3`,\n    Equip_2: `${process.env.PUBLIC_URL}/sounds/Equip_2.mp3`,\n    Equip_3: `${process.env.PUBLIC_URL}/sounds/Equip_3.mp3`,\n    Equip_4: `${process.env.PUBLIC_URL}/sounds/Equip_4.mp3`,\n    Hero_1: `${process.env.PUBLIC_URL}/sounds/Hero_1.mp3`,\n    Hero_2: `${process.env.PUBLIC_URL}/sounds/Hero_2.mp3`,\n    Jump: `${process.env.PUBLIC_URL}/sounds/Jump.mp3`,\n    Explosion_1: `${process.env.PUBLIC_URL}/sounds/Explosion_1.mp3`,\n    Explosion_2: `${process.env.PUBLIC_URL}/sounds/Explosion_2.mp3`,\n\n    Music: `${process.env.PUBLIC_URL}/music/Music.mp3`,\n    Drone: `${process.env.PUBLIC_URL}/music/Drone.mp3`,\n}\n\nexport type SoundName = keyof typeof soundList\n\nconst masterVolume = 0.5\n\nexport const getAudio = (name: SoundName, volume?: number) => {\n    const audio = new Audio(soundList[name])\n    audio.volume = masterVolume\n    if (volume) audio.volume = volume * masterVolume\n    return audio\n}\n\nexport const play = (name: SoundName, volume?: number) => {\n    getAudio(name).play()\n}\n\nexport const playEquip = (volume?: number) => {\n    const list = ['Equip_1', 'Equip_2', 'Equip_3', 'Equip_4']\n    play(list[Math.round(Math.random() * 4)] as SoundName, volume)\n}\n\nlet explosionIndex = 0\nexport const playExplosion = (volume?: number) => {\n    const list = ['Explosion_1', 'Explosion_2']\n    play(list[explosionIndex] as SoundName, volume)\n    explosionIndex += 1\n    if (explosionIndex > list.length - 1) explosionIndex = 0\n}\n\nconst engineStart = new Audio(soundList['Engine_LOOP_128'])\n\nexport const playEngine = (volume?: number) => {\n    if (volume) engineStart.volume = volume\n    // const playEnd = () => {\n    //     play('Engine_stop', volume)\n    //     engineStart.removeEventListener('ended', playEnd)\n    // }\n    engineStart.play()\n    setTimeout(() => engineStart.pause(), 300)\n    // engineStart.removeEventListener('ended', playEnd)\n    // engineStart.addEventListener('ended', playEnd)\n}\n","import { uniqueId } from 'lodash'\nimport { play, playEquip, playExplosion } from '../audio/play'\nimport { reverseVector } from '../helpers'\nimport { move, removeObject, setObjectData, tmpSpawn, win } from '../state/gameReducer'\nimport { PLAYER_ID } from '../types/consts'\nimport { ObjectDefinition, ObjectTypes } from '../types/types'\nimport {\n    Arrow,\n    Boom,\n    Box,\n    Button,\n    Cannon,\n    Trigger,\n    Crossbow,\n    Door,\n    Fence,\n    Pipe,\n    PipeDown,\n    PipeElement,\n    PipeLeft,\n    PipePlace,\n    PipeRight,\n    PipeUp,\n    Player,\n    Rock,\n    Rocket,\n    WallMetal,\n    Tree,\n    Tree2,\n    Metal,\n    Metal2,\n    Rock2,\n} from './models/Items'\n\nexport const propTypeDefinitions: Partial<Record<ObjectTypes, ObjectDefinition>> = {\n    [ObjectTypes.Player]: {\n        name: 'Player',\n        height: () => 2,\n        Component3d: Player,\n    },\n\n    [ObjectTypes.BigRock]: {\n        name: 'Big rock',\n        height: () => 0.55,\n        Component3d: Rock,\n    },\n    [ObjectTypes.BigRock2]: {\n        name: 'Big rock2',\n        height: () => 0.55,\n        Component3d: Rock2,\n    },\n    [ObjectTypes.Pipe]: {\n        name: 'Pipe',\n        height: () => 0.75,\n        Component3d: Pipe,\n    },\n\n    [ObjectTypes.PipeLeft]: {\n        name: 'PipeLeft',\n        height: () => 0.75,\n        Component3d: PipeLeft,\n    },\n    [ObjectTypes.PipeRight]: {\n        name: 'PipeRight',\n        height: () => 0.75,\n        Component3d: PipeRight,\n    },\n    [ObjectTypes.PipeUp]: {\n        name: 'PipeUp',\n        height: () => 0.75,\n        Component3d: PipeUp,\n    },\n    [ObjectTypes.PipeDown]: {\n        name: 'PipeDown',\n        height: () => 0.75,\n        Component3d: PipeDown,\n    },\n    [ObjectTypes.PipeElement]: {\n        name: 'PipeElement',\n        height: () => 0.9,\n        push: ({ self, vector }) => [move({ targetId: self.id, vector })],\n        Component3d: PipeElement,\n    },\n    [ObjectTypes.PipePlace]: {\n        name: 'PipePlace',\n        height: () => 0.14,\n        enter: ({ who }) => {\n            if (who.type === ObjectTypes.PipeElement) {\n                play('Engine_start')\n                return [win()]\n            }\n            return []\n        },\n        Component3d: PipePlace,\n    },\n    [ObjectTypes.Tree]: {\n        name: 'Tree',\n        height: () => 2,\n        Component3d: Tree,\n    },\n    [ObjectTypes.Tree2]: {\n        name: 'Tree2',\n        height: () => 2,\n        Component3d: Tree2,\n    },\n    [ObjectTypes.Metal]: {\n        name: 'Metal',\n        height: () => 2,\n        Component3d: Metal,\n    },\n    [ObjectTypes.Metal2]: {\n        name: 'Metal2',\n        height: () => 2,\n        Component3d: Metal2,\n    },\n\n    [ObjectTypes.Box]: {\n        name: 'Box',\n        height: () => 1,\n        push: ({ self, vector }) => [move({ targetId: self.id, vector })],\n        Component3d: Box,\n    },\n\n    [ObjectTypes.Fence]: {\n        name: 'Fence',\n        height: () => 1.2,\n        push: ({ force, self }) => {\n            if (force && force >= 50) return [removeObject(self.id)]\n            return []\n        },\n        Component3d: Fence,\n    },\n\n    [ObjectTypes.Button]: {\n        name: 'Button',\n        height: () => 2,\n        push: ({ state, self }) => {\n            play('button')\n            if (!self.data.targetId) {\n                console.warn('Missing Button data.targetId')\n                return []\n            }\n            const toggle = !self.data.active\n            return [\n                setObjectData({ targetId: self.id, data: { active: toggle } }),\n                setObjectData({ targetId: self.data.targetId, data: { open: toggle } }),\n            ]\n        },\n        Component3d: Button,\n    },\n\n    [ObjectTypes.WinTrigger]: {\n        name: 'WinTrigger',\n        height: () => 0,\n        enter: ({ who, state, self }) => {\n            if (who.id === PLAYER_ID) {\n                play('Engine_start')\n                return [win()]\n            }\n            return []\n        },\n        Component3d: Trigger,\n    },\n\n    [ObjectTypes.Door]: {\n        name: 'Door',\n        height: instance => (instance.data.open ? 0 : 1.2),\n        Component3d: Door,\n    },\n    [ObjectTypes.WallMetal]: {\n        name: 'WallMetal',\n        height: () => 1.2,\n        Component3d: WallMetal,\n    },\n\n    [ObjectTypes.Cannon]: {\n        name: 'Cannon',\n        height: () => 0,\n        equip: ({ who, self }) => {\n            playEquip(0.8)\n            return [\n                setObjectData({ targetId: who.id, data: { hasCannon: true } }),\n                removeObject(self.id),\n            ]\n        },\n        Component3d: Cannon,\n    },\n\n    [ObjectTypes.Boom]: {\n        name: 'Boom',\n        height: () => 0,\n        Component3d: Boom,\n    },\n\n    [ObjectTypes.Crossbow]: {\n        name: 'Crossbow',\n        height: () => 0,\n        equip: ({ who, self }) => {\n            playEquip(0.8)\n            return [\n                setObjectData({ targetId: who.id, data: { hasGrapple: true } }),\n                removeObject(self.id),\n            ]\n        },\n        Component3d: Crossbow,\n    },\n\n    [ObjectTypes.RocketProjectile]: {\n        name: 'RocketProjectile',\n        height: () => 0,\n        projectileLaunch: ({ who }) => {\n            play('Bazooka')\n            return [\n                move(\n                    { targetId: who.id, vector: reverseVector(who.rotation) },\n                    { delay: 250 }, // delay remove from projectileHit\n                ),\n            ]\n        },\n        projectileHit: ({ self, what, who }) => {\n            if (!what) {\n                return [removeObject(self.id)]\n            }\n\n            playExplosion(1)\n            return [\n                removeObject(self.id),\n                tmpSpawn({\n                    instance: {\n                        type: ObjectTypes.Boom,\n                        id: uniqueId(),\n                        xy: self.xy,\n                        elevation: self.elevation,\n                        rotation: self.rotation,\n                        aIndex: 0,\n                        zIndex: 20,\n                        data: {},\n                    },\n                }),\n            ]\n        },\n        Component3d: Rocket,\n    },\n\n    [ObjectTypes.CrossbowProjectile]: {\n        name: 'Projectile',\n        height: () => 0,\n        projectileLaunch: ({ who }) => {\n            play('Crossbow')\n            return [\n                move(\n                    { targetId: who.id, vector: [0, 0] },\n                    { delay: 250 }, // delay remove from projectileHit\n                ),\n            ]\n        },\n        projectileHit: ({ self, what, who }) => {\n            if (what) {\n                play('Alert_YES') // TODO Hit!\n            }\n            return [removeObject(self.id)]\n        },\n        Component3d: Arrow,\n    },\n}\n","import { ObjectDefinition, ObjectTypes } from '../types/types'\nimport { tileTypeDefinitions } from './tileTypeDefinitions'\nimport { propTypeDefinitions } from './propTypeDefinitions'\n\nexport const objectDefinitions: Partial<Record<ObjectTypes, ObjectDefinition>> = {\n    ...tileTypeDefinitions,\n    ...propTypeDefinitions,\n}\n\nexport const getDefinition = (type: ObjectTypes): ObjectDefinition => {\n    const def = objectDefinitions[type]\n\n    if (!def) throw new Error(`[getDefinition] Definition for ${type} not found`)\n\n    return def\n}\n","import { Action } from 'redux'\nimport { applyVector, asArray, findById, findByXY } from '../../helpers'\nimport { getDefinition } from '../../objects/definitions'\nimport { ActionEvent, ObjectInstance } from '../../types/types'\nimport { GameState, flyEnd } from '../gameReducer'\nimport { ResolverResults } from './types'\n\nexport const flyResolver = (state: GameState, targetId: string): ResolverResults => {\n    let objects = state.objects\n    const actions: Action[] = []\n    const addActions = (a: Action | Action[] = []) => actions.push(...asArray(a))\n    const abortResults = { objects, actions }\n\n    const target = findById(objects, targetId)\n\n    if (!target) {\n        console.warn(`[move] Target ${targetId} not found`)\n        return abortResults\n    }\n\n    const vector = target.rotation\n    let xy = target.xy\n\n    let limit = 15\n\n    while (limit) {\n        limit--\n\n        xy = applyVector(xy, vector)\n        const newXYObjects = findByXY(objects, xy).sort((a, b) => b.aIndex - a.aIndex)\n\n        for (const obj of newXYObjects) {\n            const objDef = getDefinition(obj.type)\n            const event: ActionEvent = { who: target, vector, state, self: obj, force: 100 }\n\n            if (isTooHight(obj, target)) {\n                objects = objects.map(obj => {\n                    if (obj !== target) return obj\n                    return { ...obj, xy }\n                })\n\n                addActions(flyEnd({ targetId, hitTargetId: obj.id }))\n                addActions(objDef.push?.(event))\n                return { objects, actions }\n            }\n        }\n    }\n\n    addActions(flyEnd({ targetId }))\n\n    objects = objects.map(obj => {\n        if (obj !== target) return obj\n        return { ...obj, xy }\n    })\n\n    return { objects, actions }\n}\n\nconst isTooHight = (ontoObj: ObjectInstance, flyer: ObjectInstance) => {\n    const objDef = getDefinition(ontoObj.type)\n    return ontoObj.elevation + objDef.height(ontoObj) > flyer.elevation\n}\n","import { uniqueId } from 'lodash'\nimport { Action } from 'redux'\nimport {\n    GRAPPLE_ELEVATION,\n    PROJECTILE_ELEVATION,\n    GRAPPLE_MOVE_DELAY,\n    GRAPPLE_RANGE,\n} from '../../config'\nimport { applyVector, asArray, findById, findByXY, vectorDiff } from '../../helpers'\nimport { getDefinition } from '../../objects/definitions'\nimport { ObjectInstance, ObjectTypes, Vector2 } from '../../types/types'\nimport { GameState, move, tmpSpawn, updateObject } from '../gameReducer'\nimport { ResolverResults } from './types'\n\nexport const grappleResolver = (state: GameState, targetId: string): ResolverResults => {\n    let objects = state.objects\n    const actions: Action[] = []\n    const addActions = (a: Action | Action[] = []) => actions.push(...asArray(a))\n    const abortResults = { objects, actions }\n\n    const target = findById(objects, targetId)\n\n    if (!target) {\n        console.warn(`[grappleResolver] Target ${targetId} not found`)\n        return abortResults\n    }\n\n    const projectileInstance: ObjectInstance = {\n        type: ObjectTypes.CrossbowProjectile,\n        id: uniqueId(),\n        xy: target.xy,\n        rotation: target.rotation,\n        elevation: target.elevation + PROJECTILE_ELEVATION,\n        aIndex: 100,\n        zIndex: 10,\n        data: {},\n    }\n\n    const addGrappleAnimation = () => {\n        addActions(tmpSpawn({ instance: projectileInstance }))\n        addActions(\n            updateObject(\n                { targetId: projectileInstance.id, objectValues: { xy } },\n                { delay: GRAPPLE_MOVE_DELAY },\n            ),\n        )\n    }\n\n    const vector = target.rotation\n    let xy = target.xy\n\n    let limit = GRAPPLE_RANGE\n\n    while (limit) {\n        limit--\n\n        const prevXY = xy\n        xy = applyVector(xy, vector)\n        const newXYObjects = findByXY(objects, xy).sort((a, b) => b.aIndex - a.aIndex)\n\n        for (const obj of newXYObjects) {\n            if (isTooHight(obj, target)) {\n                addGrappleAnimation()\n                addActions(\n                    move({\n                        targetId,\n                        vector: vectorDiff(target.xy, prevXY),\n                    }),\n                )\n\n                return { objects, actions }\n            }\n        }\n    }\n\n    // miss\n    xy = applyVector(xy, vector)\n    addGrappleAnimation()\n\n    return { objects, actions }\n}\n\nconst isTooHight = (ontoObj: ObjectInstance, flyer: ObjectInstance) => {\n    const objDef = getDefinition(ontoObj.type)\n    return ontoObj.elevation + objDef.height(ontoObj) > flyer.elevation + GRAPPLE_ELEVATION\n}\n","import { Action } from 'redux'\nimport { FALL_REMOVE_DELAY, FALL_TRIGGER_DELAY, MAX_MOVE_ELEVATION } from '../../config'\nimport { applyVector, asArray, findById, findByXY } from '../../helpers'\nimport { getDefinition } from '../../objects/definitions'\nimport { PLAYER_ID } from '../../types/consts'\nimport { ActionEvent, ObjectInstance, Vector2 } from '../../types/types'\nimport { fall, GameState, lose, removeObject, updateObject } from '../gameReducer'\nimport { ResolverResults } from './types'\n\nexport const moveResolver = (\n    state: GameState,\n    targetId: string,\n    vector: Vector2,\n): ResolverResults => {\n    const { objects } = state\n    const actions: Action[] = []\n    const addActions = (a: Action | Action[] = []) => actions.push(...asArray(a))\n\n    const target = findById(objects, targetId)\n\n    if (!target) {\n        console.warn(`[move] Target ${targetId} not found`)\n        return { objects, actions }\n    }\n\n    const newXY = applyVector(target.xy, vector)\n    const newXYObjects = findByXY(objects, newXY).sort((a, b) => b.aIndex - a.aIndex)\n\n    // Nothing there, fall and die\n    if (!newXYObjects.length) {\n        addActions([\n            updateObject({ targetId, objectValues: { xy: newXY } }, { delay: FALL_TRIGGER_DELAY }),\n            fall({ targetId }, { delay: FALL_REMOVE_DELAY }),\n            targetId === PLAYER_ID ? lose() : removeObject(targetId),\n        ])\n        return { objects, actions }\n    }\n\n    // Can enter to this region?\n    for (const obj of newXYObjects) {\n        const objDef = getDefinition(obj.type)\n        const event: ActionEvent = { who: target, vector, state, self: obj }\n\n        if (isTooHight(obj, target)) {\n            addActions(objDef.push?.(event))\n            return { objects, actions }\n        }\n    }\n\n    const newElevation = maxElevation(newXYObjects)\n\n    // Post enter events\n    for (const obj of newXYObjects) {\n        const objDef = getDefinition(obj.type)\n\n        // skip when we are higher than this object eg. box in water\n        if (newElevation > obj.elevation + objDef.height(obj)) {\n            continue\n        }\n\n        const event: ActionEvent = { who: target, vector, state, self: obj }\n        addActions(objDef.enter?.(event))\n    }\n\n    // Move target to new location\n    const newObjects = objects.map(obj => {\n        if (obj !== target) return obj\n        return { ...obj, xy: newXY, elevation: newElevation }\n    })\n\n    return { objects: newObjects, actions }\n}\n\nconst maxElevation = (objects: ObjectInstance[]): number =>\n    Math.max(\n        ...objects.map(obj => {\n            const objDef = getDefinition(obj.type)\n            return objDef.height(obj) + obj.elevation\n        }),\n    )\n\nconst isTooHight = (ontoObj: ObjectInstance, who: ObjectInstance) => {\n    const objDef = getDefinition(ontoObj.type)\n    return ontoObj.elevation + objDef.height(ontoObj) - who.elevation > MAX_MOVE_ELEVATION\n}\n","import { Action } from 'redux'\nimport actionCreatorFactory from 'typescript-fsa'\nimport { reducerWithInitialState } from 'typescript-fsa-reducers'\nimport { FALL_ELEVATION } from '../config'\nimport { arrMerge, findById } from '../helpers'\nimport { getDefinition } from '../objects/definitions'\nimport { ActionEvent, MapData, ObjectInstance, ObjectInstanceData, Vector2 } from '../types/types'\nimport { equipResolver } from './resolvers/equipResolver'\nimport { flyResolver } from './resolvers/flyResolver'\nimport { grappleResolver } from './resolvers/grappleResolver'\nimport { moveResolver } from './resolvers/moveResolver'\nimport { rotateResolver } from './resolvers/rotateResolver'\n\nexport interface GameState {\n    queueStared: boolean\n    queue: Action[]\n    mapId: string | null\n    mapName: string | null\n    objects: ObjectInstance[]\n    cleanObjectsState: ObjectInstance[]\n    winDialog: boolean\n}\n\nexport interface GameStateAware {\n    game: GameState\n}\n\n// const mockObjects = createMap()\n\nexport const initialState: GameState = {\n    queueStared: false,\n    queue: [],\n    mapId: null,\n    mapName: null,\n    objects: [],\n    cleanObjectsState: [],\n    winDialog: false,\n}\n\nconst gameAction = actionCreatorFactory('GG')\nconst queueAction = actionCreatorFactory('QUEUE')\n\nexport const loadMap = gameAction<MapData>('LOAD_MAP')\nexport const unloadMap = gameAction('UNLOAD_MAP')\nexport const reset = gameAction('RESET')\nexport const win = gameAction('WIN')\nexport const showWinDialog = gameAction('SHOW_WIN_DIALOG')\nexport const lose = gameAction('LOSE')\n\nexport const enqueue = queueAction<Action | Action[]>('ENQUEUE')\nexport const tryNextAction = queueAction('TRY_NEXT_ACTION')\nexport const nextAction = queueAction<Action>('NEXT_ACTION')\nexport const queueEnd = queueAction('QUEUE_END')\n\nexport const move = gameAction<{ targetId: string; vector: Vector2 }>('MOVE')\nexport const rotate = gameAction<{ targetId: string; rotation: Vector2 }>('ROTATE')\nexport const equip = gameAction<{ targetId: string }>('EQUIP')\nexport const fall = gameAction<{ targetId: string }>('FALL')\n\nexport const projectile = gameAction<{ instance: ObjectInstance; byId: string }>('PROJECTILE')\nexport const fly = gameAction<{ targetId: string }>('FLY')\nexport const flyEnd = gameAction<{ targetId: string; hitTargetId?: string }>('FLY_END')\nexport const grapple = gameAction<{ targetId: string }>('GRAPPLE')\n\nexport const updateObject = gameAction<{\n    targetId: string\n    objectValues: Partial<ObjectInstance>\n}>('UPDATE_OBJECT')\nexport const setObjectData = gameAction<{\n    targetId: string\n    data: Partial<ObjectInstanceData>\n}>('SET_OBJECT_DATA')\nexport const removeObject = gameAction<string>('REMOVE')\nexport const addObject = gameAction<ObjectInstance>('ADD')\nexport const replaceObjects = gameAction<ObjectInstance[]>('REPLACE_OBJECTS')\nexport const updateCleanObjectsState = gameAction('UPDATE_CLEAN_OBJECTS_STATE')\nexport const tmpSpawn = gameAction<{ instance: ObjectInstance }>('TMP_SPAWN')\n\nexport const gameReducer = reducerWithInitialState(initialState)\n    /*\n     * Loading\n     */\n    .case(\n        loadMap,\n        (state, { id, name, objects }): GameState => ({\n            ...initialState,\n            mapId: id,\n            mapName: name,\n            objects,\n            cleanObjectsState: objects,\n        }),\n    )\n    .case(unloadMap, (): GameState => initialState)\n    .case(\n        reset,\n        (state): GameState => ({\n            ...state,\n            queue: [],\n            queueStared: false,\n            objects: state.cleanObjectsState,\n            cleanObjectsState: state.cleanObjectsState,\n            winDialog: false,\n        }),\n    )\n    .case(\n        showWinDialog,\n        (state): GameState => ({\n            ...state,\n            winDialog: true,\n        }),\n    )\n\n    /*\n     * Queue\n     */\n    .case(\n        enqueue,\n        (state, action): GameState => ({\n            ...state,\n            queue: arrMerge(state.queue, action),\n        }),\n    )\n    .case(\n        nextAction,\n        (state, action): GameState => ({\n            ...state,\n            queueStared: true,\n            queue: state.queue.filter(a => a !== action),\n        }),\n    )\n    .case(queueEnd, (state): GameState => ({ ...state, queueStared: false }))\n\n    /*\n     * User actions\n     */\n    .case(\n        move,\n        (state, { targetId, vector }): GameState => {\n            const { actions, objects } = moveResolver(state, targetId, vector)\n            return { ...state, objects, queue: arrMerge(state.queue, actions) }\n        },\n    )\n    .case(\n        rotate,\n        (state, { targetId, rotation }): GameState => {\n            const { actions, objects } = rotateResolver(state, targetId, rotation)\n            return { ...state, objects, queue: arrMerge(state.queue, actions) }\n        },\n    )\n    .case(\n        equip,\n        (state, { targetId }): GameState => {\n            const { actions, objects } = equipResolver(state, targetId)\n            return { ...state, objects, queue: arrMerge(state.queue, actions) }\n        },\n    )\n\n    /*\n     * Projectiles\n     */\n    .case(\n        projectile,\n        (state, { instance, byId }): GameState => {\n            const objDef = getDefinition(instance.type)\n            const objects = [...state.objects, instance]\n\n            const who = findById(state.objects, byId)!\n            const event: ActionEvent = { who, vector: instance.rotation, state, self: instance }\n\n            const launchActions = objDef.projectileLaunch?.(event) || []\n            const actions = [fly({ targetId: instance.id }), ...launchActions]\n\n            return { ...state, objects, queue: arrMerge(state.queue, actions) }\n        },\n    )\n    .case(\n        fly,\n        (state, { targetId }): GameState => {\n            const { actions, objects } = flyResolver(state, targetId)\n            return { ...state, objects, queue: arrMerge(state.queue, actions) }\n        },\n    )\n    .case(\n        flyEnd,\n        (state, { targetId, hitTargetId }): GameState => {\n            const obj = findById(state.objects, targetId)\n            const what = hitTargetId ? findById(state.objects, hitTargetId) : undefined\n\n            const actions: Action[] = []\n            if (obj) {\n                const objDef = getDefinition(obj.type)\n                const event: ActionEvent = {\n                    who: null as any, // TODO,\n                    what,\n                    vector: obj.rotation,\n                    state,\n                    self: obj,\n                }\n                const hitActions = objDef.projectileHit?.(event) || []\n                actions.push(...hitActions)\n            }\n            return { ...state, queue: arrMerge(state.queue, actions) }\n        },\n    )\n\n    /*\n     * Grapple\n     */\n    .case(\n        grapple,\n        (state, { targetId }): GameState => {\n            const { actions, objects } = grappleResolver(state, targetId)\n            return {\n                ...state,\n                objects,\n                queue: arrMerge(state.queue, actions),\n            }\n        },\n    )\n\n    /*\n     * Edit and internal actions\n     */\n    .case(\n        setObjectData,\n        (state, { targetId, data }): GameState => {\n            const target = findById(state.objects, targetId)\n\n            return {\n                ...state,\n                objects: state.objects.map(obj => {\n                    if (obj !== target) return obj\n                    return { ...obj, data: { ...obj.data, ...data } }\n                }),\n            }\n        },\n    )\n    .case(\n        updateObject,\n        (state, { targetId, objectValues }): GameState => {\n            return {\n                ...state,\n                objects: state.objects.map(obj =>\n                    obj.id === targetId ? { ...obj, ...objectValues } : obj,\n                ),\n            }\n        },\n    )\n    .case(\n        replaceObjects,\n        (state, objects): GameState => {\n            return { ...state, objects }\n        },\n    )\n    .case(\n        removeObject,\n        (state, targetId): GameState => ({\n            ...state,\n            objects: state.objects.filter(obj => obj.id !== targetId),\n        }),\n    )\n    .case(\n        addObject,\n        (state, instance): GameState => ({\n            ...state,\n            objects: arrMerge(state.objects, instance),\n        }),\n    )\n    .case(\n        updateCleanObjectsState,\n        (state): GameState => ({\n            ...state,\n            cleanObjectsState: state.objects,\n        }),\n    )\n    .case(\n        tmpSpawn,\n        (state, { instance }): GameState => ({\n            ...state,\n            objects: [...state.objects, instance],\n        }),\n    )\n    .case(\n        fall,\n        (state, { targetId }): GameState => {\n            return {\n                ...state,\n                objects: state.objects.map(obj =>\n                    obj.id === targetId ? { ...obj, elevation: FALL_ELEVATION } : obj,\n                ),\n            }\n        },\n    )\n","import { findById } from '../../helpers'\nimport { Vector2 } from '../../types/types'\nimport { ResolverResults } from './types'\nimport { GameState } from '../gameReducer'\n\nexport const rotateResolver = (\n    { objects }: GameState,\n    targetId: string,\n    rotation: Vector2,\n): ResolverResults => {\n    const target = findById(objects, targetId)\n\n    return {\n        objects: objects.map(obj => {\n            if (obj !== target) return obj\n            return { ...obj, rotation }\n        }),\n        actions: [],\n    }\n}\n","import { Action } from 'redux'\nimport { findById, findByXY } from '../../helpers'\nimport { getDefinition } from '../../objects/definitions'\nimport { ActionEvent } from '../../types/types'\nimport { ResolverResults } from './types'\nimport { GameState } from '../gameReducer'\n\nexport const equipResolver = (state: GameState, targetId: string): ResolverResults => {\n    const actions: Action[] = []\n    const target = findById(state.objects, targetId)\n    if (!target) return { objects: state.objects, actions: [] }\n\n    const myObjects = findByXY(state.objects, target.xy).sort((a, b) => b.aIndex - a.aIndex)\n\n    for (const obj of myObjects) {\n        const objDef = getDefinition(obj.type)\n        const event: ActionEvent = { who: target, vector: [0, 0], state, self: obj }\n        actions.push(...(objDef.equip?.(event) || []))\n    }\n\n    return {\n        actions,\n        objects: state.objects,\n    }\n}\n","import { uniq } from 'lodash'\nimport actionCreatorFactory from 'typescript-fsa'\nimport { reducerWithInitialState } from 'typescript-fsa-reducers'\n\nexport interface LocalState {\n    completedMaps: string[]\n}\n\nexport interface LocalStateAware {\n    local: LocalState\n}\n\nexport const initialState: LocalState = {\n    completedMaps: [],\n}\n\nconst action = actionCreatorFactory('LOCAL')\nexport const addCompletedMap = action<string>('COMPLETE_MAP')\n\nexport const localReducer = reducerWithInitialState(initialState).case(\n    addCompletedMap,\n    (state, mapId): LocalState => ({\n        ...state,\n        completedMaps: uniq([...state.completedMaps, mapId]),\n    }),\n)\n","import { first } from 'lodash'\nimport { Action } from 'redux'\nimport { combineEpics, StateObservable } from 'redux-observable'\nimport { concat, Observable, of } from 'rxjs'\nimport { delay, filter, flatMap, map, mapTo } from 'rxjs/operators'\nimport { DEFAULT_ACTION_DELAY } from '../config'\nimport {\n    enqueue,\n    GameStateAware,\n    nextAction,\n    queueEnd,\n    removeObject,\n    tmpSpawn,\n    tryNextAction,\n    win,\n    reset,\n    lose,\n    showWinDialog,\n} from './gameReducer'\nimport { addCompletedMap } from './localReducer'\n\nconst enqueueEpic = (\n    actions$: Observable<Action>,\n    state$: StateObservable<GameStateAware>,\n): Observable<Action> =>\n    actions$.pipe(\n        filter(enqueue.match),\n        filter(() => !state$.value.game.queueStared),\n        mapTo(tryNextAction()),\n    )\n\nconst tryNextEpic = (\n    actions$: Observable<Action>,\n    state$: StateObservable<GameStateAware>,\n): Observable<Action> =>\n    actions$.pipe(\n        filter(tryNextAction.match),\n        map(() => first(state$.value.game.queue)),\n        map(action => (action ? nextAction(action) : queueEnd())),\n    )\n\nconst nextActionEpic = (\n    actions$: Observable<Action>,\n    state$: StateObservable<GameStateAware>,\n): Observable<Action> =>\n    actions$.pipe(\n        filter(nextAction.match),\n        flatMap(action => {\n            const newActionDelay = (action.payload as any).meta?.delay || DEFAULT_ACTION_DELAY\n            return concat(of(action.payload), of(tryNextAction()).pipe(delay(newActionDelay)))\n        }),\n    )\n\nconst tmpSpawnEpic = (\n    actions$: Observable<Action>,\n    state$: StateObservable<GameStateAware>,\n): Observable<Action> =>\n    actions$.pipe(\n        filter(tmpSpawn.match),\n        delay(600),\n        map(action => removeObject(action.payload.instance.id)),\n    )\n\nconst winEpic = (\n    actions$: Observable<Action>,\n    state$: StateObservable<GameStateAware>,\n): Observable<Action> =>\n    actions$.pipe(\n        filter(win.match),\n        delay(600),\n        flatMap(() => concat(of(showWinDialog()), of(addCompletedMap(state$.value.game.mapId!)))),\n    )\n\nconst loseEpic = (\n    actions$: Observable<Action>,\n    state$: StateObservable<GameStateAware>,\n): Observable<Action> =>\n    actions$.pipe(\n        filter(lose.match),\n        delay(600),\n        map(() => reset()),\n    )\n\nexport const gameEpics = combineEpics(\n    enqueueEpic,\n    tryNextEpic,\n    nextActionEpic,\n    tmpSpawnEpic,\n    winEpic,\n    loseEpic,\n)\n","import { Action } from 'redux'\nimport { combineEpics } from 'redux-observable'\nimport { Observable } from 'rxjs'\nimport { filter, ignoreElements, tap } from 'rxjs/operators'\nimport { play, playEngine } from '../audio/play'\nimport { equip, move, lose, grapple } from './gameReducer'\nimport { PLAYER_ID } from '../types/consts'\n\nconst moveSoundEpic = (actions$: Observable<Action>): Observable<Action> =>\n    actions$.pipe(\n        filter(move.match),\n        filter(action => action.payload.targetId === PLAYER_ID),\n        tap(() => playEngine(0.05)),\n        ignoreElements(),\n    )\n\nconst equipSoundEpic = (actions$: Observable<Action>): Observable<Action> =>\n    actions$.pipe(\n        filter(equip.match),\n        tap(target => play('Hero_2', 0.7)),\n        ignoreElements(),\n    )\n\nconst loseSoundEpic = (actions$: Observable<Action>): Observable<Action> =>\n    actions$.pipe(\n        filter(lose.match),\n        tap(target => play('Engine_NO_2', 0.7)),\n        ignoreElements(),\n    )\n\nconst grappleSoundEpic = (actions$: Observable<Action>): Observable<Action> =>\n    actions$.pipe(\n        filter(grapple.match),\n        tap(target => play('Crossbow', 0.7)),\n        ignoreElements(),\n    )\n\nexport const soundEpics = combineEpics(\n    moveSoundEpic,\n    equipSoundEpic,\n    loseSoundEpic,\n    grappleSoundEpic,\n)\n","import { applyMiddleware, combineReducers, createStore } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport { combineEpics, createEpicMiddleware } from 'redux-observable'\nimport { persistStore, persistReducer } from 'redux-persist'\nimport storage from 'redux-persist/lib/storage'\nimport { gameEpics } from './gameEpics'\nimport { gameReducer } from './gameReducer'\nimport { localReducer } from './localReducer'\nimport { soundEpics } from './soundEpics'\n\nconst epicMiddleware = createEpicMiddleware()\n\nconst composeEnhancers = composeWithDevTools({\n    name: 'App',\n})\n\nconst rootReducer = combineReducers({\n    game: gameReducer,\n    local: persistReducer({ key: 'local', storage }, localReducer),\n})\n\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(epicMiddleware)))\nexport const persistor = persistStore(store)\n\nepicMiddleware.run(combineEpics(soundEpics, gameEpics))\n","import { isEqual, uniqueId } from 'lodash'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Action } from 'redux'\nimport { play } from '../audio/play'\nimport { PROJECTILE_ELEVATION } from '../config'\nimport { findById } from '../helpers'\nimport {\n    enqueue,\n    equip,\n    GameStateAware,\n    grapple,\n    loadMap,\n    move,\n    projectile,\n    reset,\n    rotate,\n    unloadMap,\n} from '../state/gameReducer'\nimport { PLAYER_ID } from '../types/consts'\nimport { MapData, ObjectInstance, ObjectTypes, Vector2 } from '../types/types'\n\nexport const useGame = () => {\n    const state = useSelector((state: GameStateAware) => state.game)\n    const dispatch = useDispatch()\n    const player = findById(state.objects, PLAYER_ID)!\n    const rdy = !state.queueStared && !!player\n\n    const triggerMove = (vector: Vector2) => {\n        if (!rdy) return\n\n        const actions: Action[] = []\n\n        if (!isEqual(player.rotation, vector)) {\n            // Hmm it's ok without enqueue?\n            dispatch(rotate({ targetId: player.id, rotation: vector }))\n        } else {\n            actions.push(move({ targetId: player.id, vector }))\n        }\n\n        dispatch(enqueue(actions))\n    }\n\n    const triggerEquip = () => {\n        if (!rdy) return\n        dispatch(enqueue(equip({ targetId: player.id })))\n    }\n\n    const triggerGrapple = () => {\n        if (!rdy) return\n\n        if (!player.data.hasGrapple) {\n            play('Alert_NO')\n            return\n        }\n\n        dispatch(enqueue(grapple({ targetId: player.id })))\n    }\n\n    const triggerFire = () => {\n        if (!rdy) return\n        const { id, xy, rotation, elevation, data } = player\n\n        if (!data.hasCannon) {\n            play('Alert_NO')\n            return\n        }\n\n        const instance: ObjectInstance = {\n            type: ObjectTypes.RocketProjectile,\n            id: uniqueId(),\n            xy,\n            rotation,\n            elevation: elevation + PROJECTILE_ELEVATION,\n            aIndex: 100,\n            zIndex: 10,\n            data,\n        }\n\n        dispatch(enqueue(projectile({ byId: id, instance })))\n    }\n\n    const triggerReset = () => {\n        if (!rdy) return\n        dispatch(reset())\n    }\n\n    const triggerLoadMap = (map: MapData) => {\n        dispatch(loadMap(map))\n    }\n\n    const triggerUnloadMap = () => {\n        dispatch(unloadMap())\n    }\n\n    return {\n        ...state,\n        player,\n\n        loadMap: triggerLoadMap,\n        unloadMap: triggerUnloadMap,\n        reset: triggerReset,\n\n        move: triggerMove,\n        equip: triggerEquip,\n        fire: triggerFire,\n        grapple: triggerGrapple,\n    }\n}\n","import React, { useEffect } from 'react'\nimport { Color } from 'three'\nimport { useGame } from '../hooks/useGame'\nimport { useThree, useFrame } from 'react-three-fiber'\nimport { ObjectInstance } from '../types/types'\nimport { CAMERA_OFFSET } from '../config'\n\nconst d = 5\n\ninterface EnvironmentProps {\n    // player: ObjectInstance,\n    mapId: string | null\n    objectsList: ObjectInstance[]\n}\n\nexport const Environment = ({ objectsList, mapId }: EnvironmentProps) => {\n    const { camera, size } = useThree()\n\n    useEffect(() => {\n        const xValues = objectsList.map(obj => obj.xy[0])\n        const yValues = objectsList.map(obj => obj.xy[1])\n\n        const mapCenterX = Math.max(...xValues) / 2\n        const mapCenterY = Math.max(...yValues) / 2\n\n        const offsetX =\n            (CAMERA_OFFSET[0] * Math.max(mapCenterX, mapCenterY) * 7) /\n            (size.width / size.height) /\n            0.9\n        const offsetY =\n            (CAMERA_OFFSET[1] * Math.max(mapCenterX, mapCenterY) * 7) /\n            (size.width / size.height) /\n            0.9\n        const offsetZ =\n            (CAMERA_OFFSET[2] * Math.max(mapCenterX, mapCenterY) * 7) /\n            (size.width / size.height) /\n            0.9\n\n        camera.position.set(mapCenterX + offsetX, offsetZ, mapCenterY + offsetY)\n        camera.lookAt(mapCenterX, 0, mapCenterY)\n    }, [mapId, size])\n\n    return (\n        <group>\n            <ambientLight intensity={2} color={new Color('#dbab93')} />\n            <pointLight\n                position={[6, 7, 8]}\n                intensity={2.2}\n                color={new Color('#c86b6f')}\n                shadow-mapSize-Height=\"1024\"\n                shadow-mapSize-width=\"1024\"\n                shadow-camera-far={30}\n                shadow-bias={-0.01}\n                castShadow\n                shadow-camera-left={-d}\n                shadow-camera-right={d}\n                shadow-camera-top={d}\n                shadow-camera-bottom={-d}\n            />\n            <pointLight position={[1, 3, 5]} intensity={2.2} color={new Color('#3a8dc2')} />\n        </group>\n    )\n}\n","import React, { Suspense } from 'react'\nimport { Canvas, Dom } from 'react-three-fiber'\nimport styled from 'styled-components'\nimport { PCFSoftShadowMap } from 'three'\nimport { LOADING } from '../config'\nimport { useGame } from '../hooks/useGame'\nimport { getDefinition } from '../objects/definitions'\nimport { Environment } from './Environment'\n\nexport const GameInstance = () => {\n    const { objects, mapId } = useGame()\n\n    if (!mapId) return null\n\n    return (\n        <>\n            {mapId && (\n                <Canvas\n                    key={mapId}\n                    camera={{\n                        zoom: 20,\n                    }}\n                    onCreated={scene => {\n                        if (scene.gl?.shadowMap) {\n                            scene.gl.shadowMap.type = PCFSoftShadowMap\n                            scene.gl.shadowMap.enabled = true\n                        }\n                    }}\n                >\n                    <group>\n                        <Environment objectsList={objects} mapId={mapId} />\n                        <Suspense\n                            fallback={\n                                <Dom>\n                                    <Loading>\n                                        <span>{LOADING}</span>\n                                    </Loading>\n                                </Dom>\n                            }\n                        >\n                            {objects.map(obj => {\n                                const { Component3d } = getDefinition(obj.type)\n                                return <Component3d key={obj.id} instance={obj} />\n                            })}\n                        </Suspense>\n                    </group>\n                </Canvas>\n            )}\n        </>\n    )\n}\n\nconst Loading = styled.div`\n    width: 50vw;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n    font-weight: bold;\n    font-size: 34px;\n`\n","import styled from 'styled-components'\n\nexport const Button = styled.button`\n    background: none;\n    color: rgba(205, 236, 255, 0.7);\n    font-size: 14px;\n    border: 1px solid currentColor;\n    padding: 10px 20px;\n    margin: 4px;\n    border-radius: 4px;\n    text-transform: uppercase;\n    display: inline-block;\n    cursor: pointer;\n\n    &:hover {\n        background-color: rgba(205, 236, 255, 0.2);\n    }\n\n    small {\n        display: block;\n        font-size: 10;\n        text-transform: uppercase;\n        margin-top: 2px;\n    }\n    strong {\n        font-size: 27px;\n    }\n`\n\nexport const ButtonBlock = styled.div`\n    display: inline-block;\n    ${Button} {\n        display: block;\n        margin-top: 6px;\n    }\n`\n","import React, { FC } from 'react'\nimport styled from 'styled-components'\n\nexport const Dialog: FC = ({ children }) => {\n    return (\n        <Container>\n            <DialogBG>{children}</DialogBG>\n        </Container>\n    )\n}\n\nconst Container = styled.div`\n    position: fixed;\n    z-index: 50;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`\n\nconst DialogBG = styled.div`\n    background-color: #0b4566;\n    padding: 30px 50px;\n    border-radius: 4px;\n    text-align: center;\n`\n","import { MapData } from '../types/types'\n\nimport walk from './jsons/walk.json'\nimport walkImg from './images/walk.png'\n\nimport button from './jsons/button.json'\nimport buttonImg from './images/button.png'\n\nimport box from './jsons/box.json'\nimport boxImg from './images/box.png'\n\nimport stairs from './jsons/stairs.json'\nimport stairsImg from './images/stairs.png'\n\nimport wall from './jsons/wall.json'\nimport wallImg from './images/wall.png'\n\nimport cliff from './jsons/cliff.json'\nimport cliffImg from './images/cliff.png'\n\nimport cannon from './jsons/cannon.json'\nimport cannonImg from './images/cannonRecoil.png'\n\nimport cannonRecoil from './jsons/cannonRecoil.json'\nimport cannonRecoilImg from './images/cannonRecoil.png'\n\nimport dustRiver from './jsons/dustRiver.json'\nimport dustRiverImg from './images/dustRiver.png'\n\nimport dustPipe from './jsons/dustPipe.json'\nimport dustPipeImg from './images/dustPipe.png'\n\nimport columns from './jsons/columns.json'\nimport columnsImg from './images/columns.png'\n\nimport greenRiver from './jsons/greenRiver.json'\nimport greenRiverImg from './images/greenRiver.png'\n\nimport crossbow from './jsons/crossbow.json'\nimport crossbowImg from './images/crossbow.png'\n\nimport mountains from './jsons/mountains.json'\nimport mountainsImg from './images/mountains.png'\n\nimport iceworld from './jsons/iceworld.json'\n// import iceworldImg from './images/iceworld.png'\n\nimport lake from './jsons/lake.json'\nimport lakeImg from './images/lake.png'\n\nimport map0 from './jsons/map0.json'\nimport map1 from './jsons/map1.json'\nimport map2 from './jsons/map2.json'\n\nimport mapStarter from './jsons/starter.json'\nimport { IS_DEV } from '../config'\n\nexport const maps: MapData[] = [\n    { id: 'walk', name: 'walk', image: walkImg, objects: walk as any },\n    { id: 'button', name: 'button', image: buttonImg, objects: button as any },\n\n    { id: 'box', name: 'box', image: boxImg, objects: box as any },\n\n    { id: 'stairs', name: 'stairs', image: stairsImg, objects: stairs as any },\n    { id: 'cliff', name: 'cliff', image: cliffImg, objects: cliff as any },\n    { id: 'wall', name: 'wall', image: wallImg, objects: wall as any },\n\n    // Cannon \n    { id: 'cannon', name: 'cannon', image: cannonImg, objects: cannon },\n    {\n        id: 'cannon-recoil',\n        name: 'cannon-recoil',\n        image: cannonRecoilImg,\n        objects: cannonRecoil as any,\n    },\n    { id: 'dust-river', name: 'dust-river', image: dustRiverImg, objects: dustRiver as any },\n    { id: 'columns', name: 'columns', image: columnsImg, objects: columns as any },\n    { id: 'dust-pipe', name: 'dust-pipe', image: dustPipeImg, objects: dustPipe as any },\n\n    { id: 'green-river', name: 'green-river', image: greenRiverImg, objects: greenRiver as any },\n\n    // Crossbow \n    { id: 'crossbow', name: 'crossbow', image: crossbowImg, objects: crossbow as any },\n    { id: 'mountains', name: 'mountains', image: mountainsImg, objects: mountains as any },\n\n    { id: 'iceworld', name: 'iceworld', objects: iceworld as any },\n\n    { id: 'lake', name: 'lake', image: lakeImg, objects: lake as any },\n]\n\nif (IS_DEV) {\n    maps.push(\n        { id: 'map-0', name: 'Test 0', objects: map0 as any },\n        { id: 'map-1', name: 'Test 1', objects: map1 as any },\n        { id: 'map-2', name: 'Test 2', objects: map2 as any },\n        { id: 'starter', name: 'Editor', objects: mapStarter as any },\n    )\n}\n","import { uniqueId } from 'lodash'\nimport { useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { randomRotation, applyVector } from '../helpers'\nimport {\n    addObject,\n    GameStateAware,\n    removeObject,\n    updateObject,\n    updateCleanObjectsState,\n    replaceObjects,\n} from '../state/gameReducer'\nimport { ObjectInstance, ObjectTypes, Vector2 } from '../types/types'\n\nexport const useEditor = () => {\n    const state = useSelector((state: GameStateAware) => state.game)\n    const [editMode, setEditMode] = useState(false)\n    const dispatch = useDispatch()\n\n    const [lastType, setLastType] = useState(ObjectTypes.RockFloor)\n    const [lastElevation, setLastElevation] = useState(0)\n\n    const updateCleanState = () => dispatch(updateCleanObjectsState())\n\n    const toggleEditMode = () => {\n        setEditMode(!editMode)\n    }\n\n    const update = (targetId: string) => (objectValues: Partial<ObjectInstance>) => {\n        objectValues.type && setLastType(objectValues.type)\n        objectValues.elevation && setLastElevation(objectValues.elevation)\n\n        dispatch(updateObject({ targetId, objectValues }))\n        updateCleanState()\n    }\n\n    const moveMap = (vector: Vector2) => {\n        dispatch(\n            replaceObjects(\n                state.objects.map(obj => ({\n                    ...obj,\n                    xy: applyVector(obj.xy, vector),\n                })),\n            ),\n        )\n    }\n\n    const add = (objectValues: Partial<ObjectInstance>) => {\n        const instance: ObjectInstance = {\n            type: lastType,\n            id: `${uniqueId()}-${state.objects.length}`,\n            xy: [0, 0],\n            rotation: randomRotation(),\n            elevation: lastElevation,\n            zIndex: 0,\n            aIndex: 0,\n            data: {},\n            ...objectValues,\n        }\n\n        dispatch(addObject(instance))\n        updateCleanState()\n    }\n\n    const remove = (targetId: string) => {\n        dispatch(removeObject(targetId))\n        updateCleanState()\n    }\n\n    const copyMap = () => {\n        const serializedMap = JSON.stringify(state.objects)\n\n        navigator.clipboard.writeText(serializedMap).then(() => {\n            console.log('Copied to clipboard')\n        }, console.error)\n    }\n\n    return { update, add, remove, moveMap, toggleEditMode, editMode, copyMap }\n}\n","// import { useEffect } from 'react'\n\n// export const useKeyboardEvent = (key: string, callback: Function) => {\n//     useEffect(() => {\n//         const handler = (event: KeyboardEvent) => {\n//             if (event.key === key) callback()\n//         }\n\n//         window.addEventListener('keydown', handler)\n\n//         return () => window.removeEventListener('keydown', handler)\n//     })\n// }\n\nimport hotkeys from 'hotkeys-js'\nimport { DependencyList, useEffect, useCallback } from 'react'\n\nexport const useKeyboardEvent = (\n    key: string | false,\n    callback: (event: KeyboardEvent) => void,\n    deps: DependencyList = [],\n) => {\n    const memoisedCallback = useCallback(callback, deps)\n\n    useEffect(() => {\n        if (!key) return\n\n        hotkeys(key, memoisedCallback)\n\n        return () => hotkeys.unbind(key, memoisedCallback)\n    }, [key, memoisedCallback])\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { AUTHORS } from '../config'\nimport { shuffleArray } from '../helpers'\n\nexport const Authors = () => (\n    <>\n        <Info>\n            <b>Twrcy</b>\n        </Info>\n        <AuthorList>\n            {shuffleArray(AUTHORS).map(({ name, tech }, index) => (\n                <li key={index}>\n                    <b>{name}</b> {tech}\n                </li>\n            ))}\n        </AuthorList>\n        <Info>\n            Gra stworzona w ramach Game Jam{' '}\n            <a href=\"https://zostanwdomurobgry.pl\">ZostanWDomuRobGry.pl</a>\n        </Info>\n    </>\n)\n\nconst Info = styled.p`\n    text-align: center;\n`\n\nconst AuthorList = styled.ul`\n    text-align: center;\n    list-style: none;\n    line-height: 1.4;\n`\n","import { isEmpty, isEqual } from 'lodash'\nimport React, { useState } from 'react'\nimport styled from 'styled-components'\nimport { createArray, findByXY, applyVector } from '../helpers'\nimport { useEditor } from '../hooks/useEditor'\nimport { getDefinition, objectDefinitions } from '../objects/definitions'\nimport { DOWN, LEFT, RIGHT, UP } from '../types/consts'\nimport { ObjectInstance, ObjectTypes, Vector2, XY } from '../types/types'\n\ninterface DebugViewProps {\n    objects: ObjectInstance[]\n}\n\nconst size = 150\nconst grid = 10\n\nconst color: Partial<Record<ObjectTypes, string>> = {\n    [ObjectTypes.Player]: 'red',\n    [ObjectTypes.WinTrigger]: 'green',\n\n    [ObjectTypes.Grass]: 'green',\n    [ObjectTypes.Water]: 'blue',\n    [ObjectTypes.RockFloor]: 'gray',\n    [ObjectTypes.Wall]: 'white',\n    [ObjectTypes.Box]: 'brown',\n    [ObjectTypes.BigRock]: 'silver',\n    [ObjectTypes.BigRock2]: 'silver',\n\n    [ObjectTypes.Pipe]: 'lightblue',\n    [ObjectTypes.PipeLeft]: 'lightblue',\n    [ObjectTypes.PipeRight]: 'lightblue',\n    [ObjectTypes.PipePlace]: 'lightblue',\n    [ObjectTypes.PipeUp]: 'lightblue',\n    [ObjectTypes.PipeDown]: 'lightblue',\n    [ObjectTypes.PipeElement]: 'lightblue',\n\n    [ObjectTypes.Fence]: 'white',\n\n    [ObjectTypes.Button]: 'pink',\n    [ObjectTypes.Door]: 'pink',\n    [ObjectTypes.WallMetal]: 'black',\n    [ObjectTypes.Ice]: 'white',\n\n    [ObjectTypes.Crossbow]: 'purple',\n    [ObjectTypes.Cannon]: 'purple',\n    [ObjectTypes.Boom]: 'white',\n\n    [ObjectTypes.CrossbowProjectile]: 'white',\n    [ObjectTypes.RocketProjectile]: 'white',\n\n    [ObjectTypes.Tree]: 'green',\n    [ObjectTypes.Tree2]: 'green',\n    [ObjectTypes.Metal]: '#ccc',\n    [ObjectTypes.Metal2]: '#ccc',\n}\n\nexport const DebugView = ({ objects }: DebugViewProps) => {\n    const editor = useEditor()\n\n    return (\n        <Container>\n            <button onClick={editor.copyMap}>Copy map</button>\n            Move map:\n            <button onClick={() => editor.moveMap(UP)}>UP</button>\n            <button onClick={() => editor.moveMap(DOWN)}>DOWN</button>\n            <button onClick={() => editor.moveMap(LEFT)}>LEFT</button>\n            <button onClick={() => editor.moveMap(RIGHT)}>RIGHT</button>\n            <MapGrid>\n                {createArray(grid).map(y => (\n                    <Row key={y}>\n                        {createArray(grid).map(x => (\n                            <Cell\n                                key={x}\n                                objects={findByXY(objects, [x, y])}\n                                editor={editor}\n                                xy={[x, y]}\n                            />\n                        ))}\n                    </Row>\n                ))}\n            </MapGrid>\n        </Container>\n    )\n}\n\nconst Container = styled.div`\n    position: absolute;\n    z-index: 100;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    opacity: 0.8;\n    background-color: rgba(0, 0, 0, 0.7);\n    overflow: auto;\n`\n\nconst MapGrid = styled.div`\n    border: 1px solid #333;\n    font-size: 12px;\n`\n\nconst Row = styled.div`\n    display: flex;\n`\n\nconst Cols = styled.div`\n    display: grid;\n    grid-auto-flow: column;\n    grid-auto-columns: auto;\n    margin: 5px 0;\n`\n\ninterface CellProps {\n    xy: XY\n    objects: ObjectInstance[]\n    editor: ReturnType<typeof useEditor>\n}\n\nexport const Cell = ({ objects, xy, editor: { update, add, remove } }: CellProps) => {\n    const [open, setOpen] = useState(false)\n\n    const addEmpty = () => add({ xy })\n    const openAndAdd = () => {\n        setOpen(true)\n        if (!objects.length) addEmpty()\n    }\n\n    const getHeight = (obj: ObjectInstance) => {\n        const def = getDefinition(obj.type)\n        return def.height(obj)\n    }\n\n    if (open) {\n        return (\n            <CellContainer>\n                {objects.map(obj => (\n                    <CellObj key={obj.id}>\n                        <Remove onClick={() => remove(obj.id)} />\n                        <TextInput obj={obj} field=\"id\" onChange={update(obj.id)} />\n                        <TypeSelect obj={obj} onChange={update(obj.id)} />\n                        elevation:\n                        <ElevationInput obj={obj} onChange={update(obj.id)} />\n                        rotation:\n                        <RotationInput obj={obj} onChange={update(obj.id)} />\n                        move:\n                        <MoveInput obj={obj} onChange={update(obj.id)} />\n                        <Cols>\n                            <div>\n                                zIndex:\n                                <NumberInput obj={obj} field=\"zIndex\" onChange={update(obj.id)} />\n                            </div>\n                            <div>\n                                aIndex:\n                                <NumberInput obj={obj} field=\"aIndex\" onChange={update(obj.id)} />\n                            </div>\n                            <div>\n                                Size: <br />\n                                h: <b>{getHeight(obj)}</b> e: <b>{obj.elevation}</b>\n                            </div>\n                        </Cols>\n                        <DataInput obj={obj} onChange={update(obj.id)} />\n                    </CellObj>\n                ))}\n                <button onClick={addEmpty}>+</button>\n                <button onClick={() => setOpen(false)}>Close</button>\n            </CellContainer>\n        )\n    }\n\n    return (\n        <CellInfoContainer onClick={openAndAdd}>\n            {objects.map(obj => (\n                <CellObj key={obj.id}>\n                    <div>\n                        <strong style={{ color: color[obj.type] }}>{obj.type}</strong> <br />\n                        <small>{obj.id}</small>\n                    </div>\n                    {!isEmpty(obj.data) && <pre>{JSON.stringify(obj.data, null, 1)}</pre>}\n                    <small>\n                        h: {getHeight(obj)} e: {obj.elevation}\n                    </small>\n                </CellObj>\n            ))}\n        </CellInfoContainer>\n    )\n}\n\nconst CellInfoContainer = styled.div`\n    width: ${size}px;\n    min-height: ${size}px;\n    border: 1px solid #333;\n`\n\nconst CellObj = styled.div`\n    position: relative;\n    background: #333;\n    padding: 7px 10px;\n    margin: 4px;\n    line-height: 1;\n    font-size: 12px;\n    pre {\n        font-size: 10px;\n    }\n`\n\nconst Remove = styled.div`\n    position: absolute;\n    top: 0;\n    right: 0;\n    cursor: pointer;\n    &::after {\n        content: '';\n    }\n`\n\nconst CellContainer = styled.div`\n    width: ${size * 1.5}px;\n    min-height: ${size}px;\n    border: 1px solid #333;\n`\n\ninterface TextInputProps {\n    obj: ObjectInstance\n    field: keyof ObjectInstance\n    onChange(partial: Partial<ObjectInstance>): void\n}\n\nconst TextInput = ({ obj, field, onChange }: TextInputProps) => {\n    return (\n        <div>\n            <input\n                value={obj[field] as string}\n                onChange={event => onChange({ [field]: event.target.value })}\n            />\n        </div>\n    )\n}\n\ninterface NumberInputProps {\n    obj: ObjectInstance\n    field: keyof ObjectInstance\n    onChange(partial: Partial<ObjectInstance>): void\n    style?: React.CSSProperties\n}\n\nconst NumberInput = ({ obj, field, onChange, style }: NumberInputProps) => {\n    return (\n        <div>\n            <input\n                type=\"number\"\n                step=\"0.1\"\n                value={obj[field] as string}\n                style={style || { width: 40 }}\n                onChange={event => {\n                    const value = parseFloat(event.target.value)\n                    if (Number.isNaN(value)) return\n                    onChange({ [field]: parseFloat(event.target.value) })\n                }}\n            />\n        </div>\n    )\n}\n\ninterface TypeSelectProps {\n    obj: ObjectInstance\n    onChange(partial: Partial<ObjectInstance>): void\n}\n\nconst TypeSelect = ({ obj, onChange }: TypeSelectProps) => {\n    return (\n        <div>\n            <select\n                value={obj.type}\n                onChange={event => onChange({ type: event.target.value as ObjectTypes })}\n            >\n                {Object.keys(objectDefinitions).map(item => (\n                    <option>{item}</option>\n                ))}\n            </select>\n        </div>\n    )\n}\n\ninterface ElevationInputProps {\n    obj: ObjectInstance\n    onChange(partial: Partial<ObjectInstance>): void\n}\n\nconst ElevationInput = ({ obj, onChange }: ElevationInputProps) => {\n    const f = 100\n    return (\n        <div>\n            <Cols>\n                <NumberInput obj={obj} field=\"elevation\" onChange={onChange} />\n                <input\n                    type=\"range\"\n                    min={-1 * f}\n                    max={10 * f}\n                    value={obj.elevation * f}\n                    onChange={event => onChange({ elevation: parseFloat(event.target.value) / f })}\n                />\n            </Cols>\n        </div>\n    )\n}\n\ninterface RotationInputProps {\n    obj: ObjectInstance\n    onChange(partial: Partial<ObjectInstance>): void\n}\n\nconst RotationInput = ({ obj, onChange }: RotationInputProps) => {\n    return (\n        <div>\n            <RotationInputButton obj={obj} label={'LEFT'} rotation={LEFT} onChange={onChange} />\n            <RotationInputButton obj={obj} label={'UP'} rotation={UP} onChange={onChange} />\n            <RotationInputButton obj={obj} label={'DOWN'} rotation={DOWN} onChange={onChange} />\n            <RotationInputButton obj={obj} label={'RIGHT'} rotation={RIGHT} onChange={onChange} />\n        </div>\n    )\n}\n\ninterface RotationInputButtonProps {\n    label: string\n    obj: ObjectInstance\n    rotation?: Vector2\n    onChange(partial: Partial<ObjectInstance>): void\n}\n\nconst RotationInputButton = ({ obj, onChange, rotation, label }: RotationInputButtonProps) => {\n    return (\n        <RotationBtn\n            active={!!rotation && isEqual(obj.rotation, rotation)}\n            onClick={() => onChange({ rotation })}\n        >\n            {label}\n        </RotationBtn>\n    )\n}\n\nconst RotationBtn = styled.span<{ active: boolean }>`\n    margin-right: 5px;\n    cursor: pointer;\n    ${p => p.active && 'font-weight: bold;'};\n`\n\nconst MoveInput = ({ obj, onChange }: RotationInputProps) => {\n    return (\n        <div>\n            <RotationInputButton\n                obj={obj}\n                label={'LEFT'}\n                onChange={() => onChange({ xy: applyVector(obj.xy, LEFT) })}\n            />\n            <RotationInputButton\n                obj={obj}\n                label={'UP'}\n                onChange={() => onChange({ xy: applyVector(obj.xy, UP) })}\n            />\n            <RotationInputButton\n                obj={obj}\n                label={'DOWN'}\n                onChange={() => onChange({ xy: applyVector(obj.xy, DOWN) })}\n            />\n            <RotationInputButton\n                obj={obj}\n                label={'RIGHT'}\n                onChange={() => onChange({ xy: applyVector(obj.xy, RIGHT) })}\n            />\n        </div>\n    )\n}\n\ninterface DataInputProps {\n    obj: ObjectInstance\n    onChange(partial: Partial<ObjectInstance>): void\n}\n\nconst DataInput = ({ obj, onChange }: DataInputProps) => {\n    const data = JSON.stringify(obj.data)\n    const [localData, setLocalData] = useState(data)\n    return (\n        <div>\n            <textarea\n                value={localData}\n                onFocus={() => setLocalData(JSON.stringify(obj.data))}\n                onChange={event => {\n                    setLocalData(event.target.value)\n                    try {\n                        const data = JSON.parse(event.target.value)\n                        onChange({ data })\n                    } catch (e) {\n                        console.error(e)\n                    }\n                }}\n            />\n        </div>\n    )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Button } from '../../components/Button'\nimport intro from './intro.mp4'\nimport outro from './outro.mp4'\nimport { BTN_SKIP } from '../../config'\n\nconst videos = {\n    intro,\n    outro,\n}\n\ninterface IntroProps {\n    onEnded(): void\n    video: keyof typeof videos\n}\n\nexport const Video = ({ onEnded, video }: IntroProps) => {\n    return (\n        <Container>\n            <HTMLVideo autoPlay onEnded={onEnded}>\n                <source src={videos[video]} type=\"video/mp4\" />\n            </HTMLVideo>\n            <SkipButton onClick={onEnded}>{BTN_SKIP}</SkipButton>\n        </Container>\n    )\n}\n\nconst SkipButton = styled(Button)`\n    position: absolute;\n    bottom: 30px;\n    left: 0;\n    right: 0;\n    margin: auto;\n    width: 200px;\n    background-color: rgba(0, 0, 0, 0.5);\n`\n\nconst Container = styled.div`\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    background: #000;\n`\n\nconst HTMLVideo = styled.video`\n    width: 100%;\n    height: 100%;\n`\n","import React, { useEffect, useRef, useState } from 'react'\nimport styled from 'styled-components'\nimport { getAudio } from '../audio/play'\nimport { Button, ButtonBlock } from '../components/Button'\nimport { Dialog } from '../components/Dialog'\nimport {\n    BTN_EQUIP,\n    BTN_EXIT,\n    BTN_FIRE,\n    BTN_GRAPPLE,\n    BTN_LEVEL,\n    BTN_PLAY,\n    BTN_RESTART,\n    CONGRATULATIONS,\n    GAME_NAME,\n    IS_DEV,\n    LEVEL_COMPLETE,\n    NEXT_LEVEL,\n} from '../config'\nimport { maps } from '../data/maps'\nimport { useEditor } from '../hooks/useEditor'\nimport { useGame } from '../hooks/useGame'\nimport { useKeyboardEvent } from '../hooks/useKeyboardEvent'\nimport { useLocal } from '../hooks/useLocal'\nimport { DOWN, LEFT, RIGHT, UP } from '../types/consts'\nimport { Authors } from './Authors'\nimport { DebugView } from './DebugView'\nimport { Video } from './intro/Video'\n\nimport logo from './assets/logo.png'\n\nexport const Menu = () => {\n    const {\n        objects,\n        winDialog,\n        mapId,\n        mapName,\n        move,\n        equip,\n        grapple,\n        fire,\n        loadMap,\n        unloadMap,\n        reset,\n    } = useGame()\n    const { player } = useGame()\n    const { editMode, toggleEditMode } = useEditor()\n    const { isCompleted, allCompeted } = useLocal()\n\n    const [introPlayed, setIntroPlayed] = useState(false)\n    const [gameStarted, setGameStarted] = useState(false)\n\n    const [outroPlayed, setOutroPlayed] = useState(false)\n    const [playingOutro, setPlayingOutro] = useState(false)\n\n    useEffect(() => {\n        if (allCompeted && !outroPlayed) {\n            if (gameStarted) {\n                setPlayingOutro(true)\n                setOutroPlayed(true)\n                unloadMap()\n            } else {\n                setOutroPlayed(true)\n            }\n        }\n    }, [outroPlayed, playingOutro, allCompeted])\n\n    const musicRef = useRef(getAudio('Music', 0.3))\n    const droneRef = useRef(getAudio('Drone', 1))\n    const playMusic = !mapId || winDialog\n\n    useEffect(() => {\n        if (!gameStarted || !introPlayed || playingOutro) {\n            droneRef.current.pause()\n            musicRef.current.pause()\n            return\n        }\n        if (playMusic) {\n            droneRef.current.pause()\n\n            musicRef.current.currentTime = 0\n            musicRef.current.play()\n        } else {\n            musicRef.current.pause()\n\n            droneRef.current.currentTime = 0\n            droneRef.current.play()\n\n            const onEnd = () => droneRef.current.play()\n            droneRef.current.addEventListener('ended', onEnd)\n            return () => droneRef.current.removeEventListener('ended', onEnd)\n        }\n    }, [playMusic, gameStarted, introPlayed, playingOutro])\n\n    const nextMap = () => {\n        const currentIndex = maps.findIndex(m => m.id === mapId)\n        const nextMap = maps[currentIndex + 1]\n        if (nextMap) loadMap(nextMap)\n        else unloadMap()\n    }\n\n    useKeyboardEvent('m', toggleEditMode, [editMode])\n\n    const left = () => move(LEFT)\n    const up = () => move(UP)\n    const down = () => move(DOWN)\n    const right = () => move(RIGHT)\n\n    useKeyboardEvent('r', reset, [mapId])\n    useKeyboardEvent('q', unloadMap)\n    useKeyboardEvent(winDialog && 'enter', nextMap, [winDialog])\n\n    useKeyboardEvent('w', up, [up])\n    useKeyboardEvent('s', down, [down])\n    useKeyboardEvent('a', left, [left])\n    useKeyboardEvent('d', right, [right])\n\n    useKeyboardEvent('up', up, [up])\n    useKeyboardEvent('down', down, [down])\n    useKeyboardEvent('left', left, [left])\n    useKeyboardEvent('right', right, [right])\n\n    useKeyboardEvent('e', equip, [equip])\n    useKeyboardEvent('f', grapple, [grapple])\n    useKeyboardEvent('space', fire, [fire])\n\n    useKeyboardEvent(\n        '*',\n        event => {\n            const index = +event.key\n            if (index && maps[index]) loadMap(maps[index])\n        },\n        [],\n    )\n\n    return (\n        <>\n            {!introPlayed && gameStarted && (\n                <Video video=\"intro\" onEnded={() => setIntroPlayed(true)} />\n            )}\n            {playingOutro && <Video video=\"outro\" onEnded={() => setPlayingOutro(false)} />}\n            {!mapId && (\n                <>\n                    <Title>\n                        <img src={logo} alt={GAME_NAME} />\n                    </Title>\n                    {gameStarted ? (\n                        <LevelWrapper>\n                            {maps.map((map, index) => (\n                                <LevelButton key={map.id} onClick={() => loadMap(map)}>\n                                    {BTN_LEVEL} {index} {isCompleted(map.id) && <Completed />}\n                                    {IS_DEV && (\n                                        <small style={{ fontSize: 11 }}>\n                                            <br />\n                                            {map.name}\n                                        </small>\n                                    )}\n                                    {map.image && <img src={map.image} width=\"200\" alt=\"\" />}\n                                </LevelButton>\n                            ))}\n                        </LevelWrapper>\n                    ) : (\n                        <StartButtonWrapper>\n                            <StartButton onClick={() => setGameStarted(true)}>\n                                {BTN_PLAY}\n                            </StartButton>\n                        </StartButtonWrapper>\n                    )}\n                </>\n            )}\n\n            {editMode && <DebugView objects={objects} />}\n\n            {mapId && (\n                <SmallMenuWrapper>\n                    <Button onClick={unloadMap}>\n                        {BTN_EXIT}\n                        <small>{`[Q]`}</small>\n                    </Button>\n                    <Button onClick={reset}>\n                        {BTN_RESTART} <small>{`[R]`}</small>\n                    </Button>\n                </SmallMenuWrapper>\n            )}\n            {mapName && (\n                <MapName>\n                    {BTN_LEVEL} {maps.findIndex(m => m.id === mapId)}\n                </MapName>\n            )}\n            {mapId && player && (\n                <ControlsWrapper>\n                    <Button onClick={left}>\n                        <strong></strong>\n                        <small>{`[A]`}</small>\n                    </Button>\n                    <ButtonBlock>\n                        <Button onClick={up}>\n                            <strong></strong>\n                            <small>{`[W]`}</small>\n                        </Button>\n                        <Button onClick={down}>\n                            <strong></strong>\n                            <small>{`[S]`}</small>\n                        </Button>\n                    </ButtonBlock>\n                    <Button onClick={right}>\n                        <strong></strong>\n                        <small>{`[D]`}</small>\n                    </Button>\n                    <Button onClick={equip}>\n                        {BTN_EQUIP} <small>{`[E]`}</small>\n                    </Button>\n                    {player.data.hasGrapple && (\n                        <Button onClick={grapple}>\n                            {BTN_GRAPPLE} <small>{`[F]`}</small>\n                        </Button>\n                    )}\n                    {player.data.hasCannon && (\n                        <Button onClick={fire}>\n                            {BTN_FIRE} <small>{'[SPACE]'}</small>\n                        </Button>\n                    )}\n                </ControlsWrapper>\n            )}\n            {winDialog && mapId && (\n                <Dialog>\n                    <h1>{CONGRATULATIONS}</h1>\n                    <p>{LEVEL_COMPLETE}</p> <br />\n                    <Button onClick={nextMap}>\n                        {NEXT_LEVEL} <small>[enter]</small>\n                    </Button>\n                </Dialog>\n            )}\n            {!mapId && <Authors />}\n        </>\n    )\n}\n\nconst Completed = styled.span`\n    &::after {\n        content: '';\n        color: #8fe34f;\n    }\n`\n\nconst StartButtonWrapper = styled.div`\n    display: flex;\n    justify-content: center;\n    padding: 120px 0;\n`\n\nconst StartButton = styled(Button)`\n    font-size: 50px;\n    padding: 40px 60px;\n`\n\nconst Title = styled.h1`\n    font-family: 'Gugi', cursive;\n    font-size: 85px;\n    text-align: center;\n    font-weight: normal;\n    color: #fff;\n    padding: 0 20px;\n    img {\n        max-width: 100%;\n        display: block;\n        margin: auto;\n    }\n`\n\nconst LevelWrapper = styled.div`\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n    grid-auto-rows: 1fr;\n    grid-gap: 24px;\n    padding: 24px;\n`\n\nconst LevelButton = styled.button`\n    cursor: pointer;\n    background: none;\n    border: none;\n    color: rgba(205, 236, 255, 0.726);\n    font-size: 30px;\n    padding: 20px 30px;\n    margin: 4px;\n    border-radius: 4px;\n    text-transform: uppercase;\n    text-align: center;\n    transition: all ease 150ms;\n\n    &:hover {\n        background-color: rgba(205, 236, 255, 0.2);\n    }\n\n    img {\n        display: block;\n        margin: auto;\n        margin-top: 20px;\n        height: 200px;\n        object-fit: contain;\n    }\n`\n\nconst MapName = styled.div`\n    font-weight: bold;\n    position: absolute;\n    z-index: 5;\n    top: 0;\n    right: 0;\n    padding: 10px 20px 0 0;\n    font-size: 24px;\n    text-transform: uppercase;\n`\n\nconst ControlsWrapper = styled.div`\n    position: absolute;\n    z-index: 5;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    text-align: center;\n`\n\nconst SmallMenuWrapper = styled.div`\n    position: absolute;\n    z-index: 5;\n    top: 0;\n    left: 0;\n`\n","import { useSelector } from 'react-redux'\nimport { LocalStateAware } from '../state/localReducer'\nimport { maps } from '../data/maps'\n\nexport const useLocal = () => {\n    const local = useSelector((state: LocalStateAware) => state.local)\n    const isCompleted = (mapId: string) => local.completedMaps.includes(mapId)\n\n    const allCompeted = maps.every(m => local.completedMaps.includes(m.id))\n\n    return { isCompleted, allCompeted }\n}\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { store, persistor } from '../state/store'\nimport { GameInstance } from './GameInstance'\nimport { Menu } from './Menu'\nimport { PersistGate } from 'redux-persist/integration/react'\n\nexport const App = () => {\n    return (\n        <Provider store={store}>\n            <PersistGate loading={null} persistor={persistor}>\n                <GameInstance />\n                <Menu />\n            </PersistGate>\n        </Provider>\n    )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { App } from './app/App'\nimport './styles/global.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}